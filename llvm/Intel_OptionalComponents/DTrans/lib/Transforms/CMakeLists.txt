#
#    Copyright (C) 2018-2021 Intel Corporation. All rights reserved.
#
#    The information and source code contained herein is the exclusive
#    property of Intel Corporation. and may not be disclosed, examined
#    or reproduced in whole or in part without explicit written authorization
#    from the company.
#
#    Source file: CMakeLists.txt
#    ------------
#    Configures build for project.
#

add_llvm_component_library(LLVMIntel_DTransOpt
  AOSToSOA.cpp
  AOSToSOAOP.cpp
  AnnotatorCleaner.cpp
  CodeAlign.cpp
  CommuteCond.cpp
  DeleteField.cpp
  DeleteFieldOP.cpp
  ReorderFields.cpp
  ResolveTypes.cpp
  EliminateROFieldAccess.cpp
  DynClone.cpp
  DTransOPOptBase.cpp
  DTransOPOptBaseTest.cpp
  DTransOptBase.cpp
  DTransOptBaseTest.cpp
  DTransOptUtils.cpp
  DTransPaddedMalloc.cpp
  MemInitTrimDown.cpp
  MemManageTrans.cpp
  PaddedPtrPropagation.cpp
  SOAToAOS.cpp
  SOAToAOSOP.cpp
  SOAToAOSArrays.cpp
  SOAToAOSClassInfo.cpp
  SOAToAOSCommon.cpp
  SOAToAOSEffects.cpp
  SOAToAOSOPEffects.cpp
  SOAToAOSPrepare.cpp
  SOAToAOSStruct.cpp
  Transpose.cpp
  WeakAlign.cpp

  ADDITIONAL_HEADER_DIRS
  ${DTRANS_MAIN_INCLUDE_DIR}/Transforms

  DEPENDS
  intrinsics_gen
  directives_gen
  LLVMIntel_DTransAnalysis

  # FIXME: figure out why LINK_COMPONENTS does not link the libraries,
  #        and remove this LINK_LIBS.
  LINK_LIBS
  LLVMAnalysis
  LLVMCore
  LLVMIntel_DTransAnalysis
  LLVMSupport
  LLVMTransformUtils

  LINK_COMPONENTS
  Analysis
  Core
  Intel_DTransAnalysis
  Support
  TransformUtils
  )
