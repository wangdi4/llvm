; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py
; REQUIRES: intel_feature_isa_gpr_movget
; RUN: llc < %s -O0 -verify-machineinstrs -mtriple=x86_64-unknown-unknown --show-mc-encoding -mattr=+gprmovget | FileCheck %s --check-prefixes=X64

define i64 @test_int_x86_movget64(i8* %A) {
; X64-LABEL: test_int_x86_movget64:
; X64:       # %bb.0:
; X64-NEXT:    movgetq (%rdi), %rax # encoding: [0xf3,0x48,0x0f,0x38,0xfa,0x07]
; X64-NEXT:    retq # encoding: [0xc3]
  %ret = call i64 @llvm.x86.movget64(i8* %A)
  ret i64 %ret
}
declare i64 @llvm.x86.movget64(i8* %A)

define i32 @test_int_x86_movget32(i8* %A) {
; X64-LABEL: test_int_x86_movget32:
; X64:       # %bb.0:
; X64-NEXT:    movgetl (%rdi), %eax # encoding: [0xf3,0x0f,0x38,0xfa,0x07]
; X64-NEXT:    retq # encoding: [0xc3]
  %ret = call i32 @llvm.x86.movget32(i8* %A)
  ret i32 %ret
}
declare i32 @llvm.x86.movget32(i8* %A)

