; Ensure SVML calls generated by intrinsics are legalized
; RUN: llc -mtriple=x86_64-unknown-linux-gnu -vector-library=SVML -O0 < %s | FileCheck %s --check-prefixes=CHECK,O0
; RUN: llc -mtriple=x86_64-unknown-linux-gnu -vector-library=SVML -O2 < %s | FileCheck %s --check-prefixes=CHECK,O2

define <2 x float> @exp_v2f32(<2 x float> %in) {
; CHECK-LABEL: exp_v2f32:
; O0: callq expf
; O0: callq expf
; O2: callq {{.*}}__svml_expf4_ha
  %call = call <2 x float> @llvm.exp.v2f32(<2 x float> %in)
  ret <2 x float> %call
}

declare <2 x float> @llvm.exp.v2f32(<2 x float>) #0

attributes #0 = { nounwind readnone }
