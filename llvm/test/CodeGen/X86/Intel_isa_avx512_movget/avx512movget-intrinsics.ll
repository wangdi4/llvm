; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py
; REQUIRES: intel_feature_isa_avx512_movget
; RUN: llc < %s -O0 -verify-machineinstrs -mtriple=i686-unknown-unknown --show-mc-encoding -mattr=+avx512f,+avx512movget | FileCheck %s --check-prefixes=X86
; RUN: llc < %s -O0 -verify-machineinstrs -mtriple=x86_64-unknown-unknown --show-mc-encoding -mattr=+avx512f,+avx512movget | FileCheck %s --check-prefixes=X64

define <16 x i32> @test_int_x86_vmovget512(i8* %A) {
; X86-LABEL: test_int_x86_vmovget512:
; X86:       # %bb.0:
; X86-NEXT:    movl {{[0-9]+}}(%esp), %eax # encoding: [0x8b,0x44,0x24,0x04]
; X86-NEXT:    vmovget (%eax), %zmm0 # encoding: [0x62,0xf2,0x7e,0x48,0xc5,0x00]
; X86-NEXT:    retl # encoding: [0xc3]
;
; X64-LABEL: test_int_x86_vmovget512:
; X64:       # %bb.0:
; X64-NEXT:    vmovget (%rdi), %zmm0 # encoding: [0x62,0xf2,0x7e,0x48,0xc5,0x07]
; X64-NEXT:    retq # encoding: [0xc3]
  %ret = call <16 x i32> @llvm.x86.vmovget512(i8* %A)
  ret <16 x i32> %ret
}
declare <16 x i32> @llvm.x86.vmovget512(i8* %A)

