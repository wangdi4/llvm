; RUN: opt -passes=sycl-kernel-prepare-args -S %s -enable-debugify -disable-output 2>&1 | FileCheck -check-prefix=DEBUGIFY %s
; RUN: opt -passes=sycl-kernel-prepare-args -S %s | FileCheck %s --check-prefixes CHECK

; Check function pointer is correctly replaced in addrspacecast/vector users.

target datalayout = "e-m:e-p270:32:32-p271:32:32-p272:64:64-i64:64-f80:128-n8:16:32:64-S128"
target triple = "x86_64-pc-linux"

declare void @llvm.masked.scatter.v16p0.v16p0(<16 x ptr>, <16 x ptr>, i32 immarg, <16 x i1>) #0

define internal i32 @_Z6my_sotPiS_i(ptr addrspace(4) %data1, ptr addrspace(4) %data2, i32 %N, ptr addrspace(3) noalias %pLocalMemBase, ptr noalias %pWorkDim, ptr noalias %pWGId, [4 x i64] %BaseGlbId, ptr noalias %pSpecialBuf, ptr noalias %RuntimeHandle) {
entry:
; CHECK-LABEL: define internal i32 @_Z6my_sotPiS_i(
; CHECK: call void @__ocl_task_sequence_async(ptr addrspace(4) noundef {{.*}}, i32 noundef 1, ptr addrspace(4) noundef addrspacecast (ptr @_Z12produce_dataPiS_i._block_invoke_kernel to ptr addrspace(4)),
; CHECK: store ptr @_Z12consume_datai._block_invoke_kernel, ptr {{.*}}, align 8
; CHECK: call void @__ocl_task_sequence_async(ptr addrspace(4) noundef {{.*}}, i32 noundef 1, ptr addrspace(4) noundef addrspacecast (ptr @_Z12consume_datai._block_invoke_kernel to ptr addrspace(4)),

  store ptr @_Z12produce_dataPiS_i._block_invoke_kernel, ptr null, align 8
  call void @__ocl_task_sequence_async(ptr addrspace(4) noundef null, i32 noundef 1, ptr addrspace(4) noundef addrspacecast (ptr @_Z12produce_dataPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) noundef null, ptr addrspace(4) noundef null, ptr addrspace(4) noundef null, ptr addrspace(4) noundef null)
  store ptr @_Z12consume_datai._block_invoke_kernel, ptr null, align 8
  call void @__ocl_task_sequence_async(ptr addrspace(4) noundef null, i32 noundef 1, ptr addrspace(4) noundef addrspacecast (ptr @_Z12consume_datai._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) noundef null, ptr addrspace(4) noundef null, ptr addrspace(4) noundef null, ptr addrspace(4) noundef null)
  ret i32 0
}

declare void @_Z12produce_dataPiS_i()

define void @_ZTSZZ4mainENKUlRN4sycl3_V17handlerEE_clES2_EUlNS0_14kernel_handlerEE_(ptr addrspace(1) %_arg_res_acc, ptr %_arg_res_acc1, ptr %_arg_res_acc2, ptr %_arg_res_acc3, ptr addrspace(1) %_arg__specialization_constants_buffer, ptr addrspace(3) %pLocalMemBase, ptr %pWorkDim, ptr %pWGId, [4 x i64] %BaseGlbId, ptr %pSpecialBuf, ptr %RuntimeHandle) !kernel_arg_base_type !1 !arg_type_null_val !2 !vectorized_kernel !3 {
entry:
; CHECK-LABEL: define void @_ZTSZZ4mainENKUlRN4sycl3_V17handlerEE_clES2_EUlNS0_14kernel_handlerEE_(
; CHECK: select i1 icmp eq (i64 ptrtoint (ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i to ptr addrspace(4)) to i64), i64 ptrtoint (ptr @_Z12produce_dataPiS_i to i64)), ptr addrspace(4) addrspacecast (ptr @_Z12produce_dataPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i._block_invoke_kernel to ptr addrspace(4))

  %0 = select i1 icmp eq (i64 ptrtoint (ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i to ptr addrspace(4)) to i64), i64 ptrtoint (ptr @_Z12produce_dataPiS_i to i64)), ptr addrspace(4) addrspacecast (ptr @_Z12produce_dataPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i._block_invoke_kernel to ptr addrspace(4))
  ret void
}

define void @_Z6my_sotPiS_i._block_invoke_kernel(ptr addrspace(3) %pLocalMemBase, ptr %pWorkDim, ptr %pWGId, [4 x i64] %BaseGlbId, ptr %pSpecialBuf, ptr %RuntimeHandle) !vectorized_kernel !4 {
FirstBB:
  ret void
}

define void @_Z12produce_dataPiS_i._block_invoke_kernel(ptr addrspace(3) %pLocalMemBase, ptr %pWorkDim, ptr %pWGId, [4 x i64] %BaseGlbId, ptr %pSpecialBuf, ptr %RuntimeHandle) {
FirstBB:
  ret void
}

define void @_Z12consume_datai._block_invoke_kernel(ptr addrspace(3) %pLocalMemBase, ptr %pWorkDim, ptr %pWGId, [4 x i64] %BaseGlbId, ptr %pSpecialBuf, ptr %RuntimeHandle) {
FirstBB:
  ret void
}

define void @_ZGVeN16uuuuu__ZTSZZ4mainENKUlRN4sycl3_V17handlerEE_clES2_EUlNS0_14kernel_handlerEE_(ptr addrspace(1) %_arg_res_acc, ptr %_arg_res_acc1, ptr %_arg_res_acc2, ptr %_arg_res_acc3, ptr addrspace(1) %_arg__specialization_constants_buffer, ptr addrspace(3) %pLocalMemBase, ptr %pWorkDim, ptr %pWGId, [4 x i64] %BaseGlbId, ptr %pSpecialBuf, ptr %RuntimeHandle) !kernel_arg_base_type !1 !arg_type_null_val !2 {
entry:
; CHECK-LABEL: define void @_ZGVeN16uuuuu__ZTSZZ4mainENKUlRN4sycl3_V17handlerEE_clES2_EUlNS0_14kernel_handlerEE_(
; CHECK: select <16 x i1> <i1 icmp eq (ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i to ptr addrspace(4)), ptr addrspace(4) inttoptr (i64 ptrtoint (ptr @_Z12produce_dataPiS_i to i64) to ptr addrspace(4))), i1 icmp eq (ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i to ptr addrspace(4)), ptr addrspace(4) inttoptr (i64 ptrtoint (ptr @_Z12produce_dataPiS_i to i64) to ptr addrspace(4))), i1 icmp eq (ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i to ptr addrspace(4)), ptr addrspace(4) inttoptr (i64 ptrtoint (ptr @_Z12produce_dataPiS_i to i64) to ptr addrspace(4))), i1 icmp eq (ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i to ptr addrspace(4)), ptr addrspace(4) inttoptr (i64 ptrtoint (ptr @_Z12produce_dataPiS_i to i64) to ptr addrspace(4))), i1 icmp eq (ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i to ptr addrspace(4)), ptr addrspace(4) inttoptr (i64 ptrtoint (ptr @_Z12produce_dataPiS_i to i64) to ptr addrspace(4))), i1 icmp eq (ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i to ptr addrspace(4)), ptr addrspace(4) inttoptr (i64 ptrtoint (ptr @_Z12produce_dataPiS_i to i64) to ptr addrspace(4))), i1 icmp eq (ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i to ptr addrspace(4)), ptr addrspace(4) inttoptr (i64 ptrtoint (ptr @_Z12produce_dataPiS_i to i64) to ptr addrspace(4))), i1 icmp eq (ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i to ptr addrspace(4)), ptr addrspace(4) inttoptr (i64 ptrtoint (ptr @_Z12produce_dataPiS_i to i64) to ptr addrspace(4))), i1 icmp eq (ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i to ptr addrspace(4)), ptr addrspace(4) inttoptr (i64 ptrtoint (ptr @_Z12produce_dataPiS_i to i64) to ptr addrspace(4))), i1 icmp eq (ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i to ptr addrspace(4)), ptr addrspace(4) inttoptr (i64 ptrtoint (ptr @_Z12produce_dataPiS_i to i64) to ptr addrspace(4))), i1 icmp eq (ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i to ptr addrspace(4)), ptr addrspace(4) inttoptr (i64 ptrtoint (ptr @_Z12produce_dataPiS_i to i64) to ptr addrspace(4))), i1 icmp eq (ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i to ptr addrspace(4)), ptr addrspace(4) inttoptr (i64 ptrtoint (ptr @_Z12produce_dataPiS_i to i64) to ptr addrspace(4))), i1 icmp eq (ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i to ptr addrspace(4)), ptr addrspace(4) inttoptr (i64 ptrtoint (ptr @_Z12produce_dataPiS_i to i64) to ptr addrspace(4))), i1 icmp eq (ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i to ptr addrspace(4)), ptr addrspace(4) inttoptr (i64 ptrtoint (ptr @_Z12produce_dataPiS_i to i64) to ptr addrspace(4))), i1 icmp eq (ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i to ptr addrspace(4)), ptr addrspace(4) inttoptr (i64 ptrtoint (ptr @_Z12produce_dataPiS_i to i64) to ptr addrspace(4))), i1 icmp eq (ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i to ptr addrspace(4)), ptr addrspace(4) inttoptr (i64 ptrtoint (ptr @_Z12produce_dataPiS_i to i64) to ptr addrspace(4)))>, <16 x ptr addrspace(4)> <ptr addrspace(4) addrspacecast (ptr @_Z12produce_dataPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z12produce_dataPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z12produce_dataPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z12produce_dataPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z12produce_dataPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z12produce_dataPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z12produce_dataPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z12produce_dataPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z12produce_dataPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z12produce_dataPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z12produce_dataPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z12produce_dataPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z12produce_dataPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z12produce_dataPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z12produce_dataPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z12produce_dataPiS_i._block_invoke_kernel to ptr addrspace(4))>, <16 x ptr addrspace(4)> <ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i._block_invoke_kernel to ptr addrspace(4))>

  %0 = select <16 x i1> <i1 icmp eq (ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i to ptr addrspace(4)), ptr addrspace(4) inttoptr (i64 ptrtoint (ptr @_Z12produce_dataPiS_i to i64) to ptr addrspace(4))), i1 icmp eq (ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i to ptr addrspace(4)), ptr addrspace(4) inttoptr (i64 ptrtoint (ptr @_Z12produce_dataPiS_i to i64) to ptr addrspace(4))), i1 icmp eq (ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i to ptr addrspace(4)), ptr addrspace(4) inttoptr (i64 ptrtoint (ptr @_Z12produce_dataPiS_i to i64) to ptr addrspace(4))), i1 icmp eq (ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i to ptr addrspace(4)), ptr addrspace(4) inttoptr (i64 ptrtoint (ptr @_Z12produce_dataPiS_i to i64) to ptr addrspace(4))), i1 icmp eq (ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i to ptr addrspace(4)), ptr addrspace(4) inttoptr (i64 ptrtoint (ptr @_Z12produce_dataPiS_i to i64) to ptr addrspace(4))), i1 icmp eq (ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i to ptr addrspace(4)), ptr addrspace(4) inttoptr (i64 ptrtoint (ptr @_Z12produce_dataPiS_i to i64) to ptr addrspace(4))), i1 icmp eq (ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i to ptr addrspace(4)), ptr addrspace(4) inttoptr (i64 ptrtoint (ptr @_Z12produce_dataPiS_i to i64) to ptr addrspace(4))), i1 icmp eq (ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i to ptr addrspace(4)), ptr addrspace(4) inttoptr (i64 ptrtoint (ptr @_Z12produce_dataPiS_i to i64) to ptr addrspace(4))), i1 icmp eq (ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i to ptr addrspace(4)), ptr addrspace(4) inttoptr (i64 ptrtoint (ptr @_Z12produce_dataPiS_i to i64) to ptr addrspace(4))), i1 icmp eq (ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i to ptr addrspace(4)), ptr addrspace(4) inttoptr (i64 ptrtoint (ptr @_Z12produce_dataPiS_i to i64) to ptr addrspace(4))), i1 icmp eq (ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i to ptr addrspace(4)), ptr addrspace(4) inttoptr (i64 ptrtoint (ptr @_Z12produce_dataPiS_i to i64) to ptr addrspace(4))), i1 icmp eq (ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i to ptr addrspace(4)), ptr addrspace(4) inttoptr (i64 ptrtoint (ptr @_Z12produce_dataPiS_i to i64) to ptr addrspace(4))), i1 icmp eq (ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i to ptr addrspace(4)), ptr addrspace(4) inttoptr (i64 ptrtoint (ptr @_Z12produce_dataPiS_i to i64) to ptr addrspace(4))), i1 icmp eq (ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i to ptr addrspace(4)), ptr addrspace(4) inttoptr (i64 ptrtoint (ptr @_Z12produce_dataPiS_i to i64) to ptr addrspace(4))), i1 icmp eq (ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i to ptr addrspace(4)), ptr addrspace(4) inttoptr (i64 ptrtoint (ptr @_Z12produce_dataPiS_i to i64) to ptr addrspace(4))), i1 icmp eq (ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i to ptr addrspace(4)), ptr addrspace(4) inttoptr (i64 ptrtoint (ptr @_Z12produce_dataPiS_i to i64) to ptr addrspace(4)))>, <16 x ptr addrspace(4)> <ptr addrspace(4) addrspacecast (ptr @_Z12produce_dataPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z12produce_dataPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z12produce_dataPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z12produce_dataPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z12produce_dataPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z12produce_dataPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z12produce_dataPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z12produce_dataPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z12produce_dataPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z12produce_dataPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z12produce_dataPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z12produce_dataPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z12produce_dataPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z12produce_dataPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z12produce_dataPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z12produce_dataPiS_i._block_invoke_kernel to ptr addrspace(4))>, <16 x ptr addrspace(4)> <ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i._block_invoke_kernel to ptr addrspace(4)), ptr addrspace(4) addrspacecast (ptr @_Z6my_sotPiS_i._block_invoke_kernel to ptr addrspace(4))>
  ret void
}

define void @_ZGVeN16u__Z6my_sotPiS_i._block_invoke_kernel(ptr addrspace(3) %pLocalMemBase, ptr %pWorkDim, ptr %pWGId, [4 x i64] %BaseGlbId, ptr %pSpecialBuf, ptr %RuntimeHandle) {
simd.begin.region:
; CHECK-LABEL: define void @_ZGVeN16u__Z6my_sotPiS_i._block_invoke_kernel(
; CHECK: call void @llvm.masked.scatter.v16p0.v16p0(<16 x ptr> <ptr @_Z12consume_datai._block_invoke_kernel, ptr @_Z12consume_datai._block_invoke_kernel, ptr @_Z12consume_datai._block_invoke_kernel, ptr @_Z12consume_datai._block_invoke_kernel, ptr @_Z12consume_datai._block_invoke_kernel, ptr @_Z12consume_datai._block_invoke_kernel, ptr @_Z12consume_datai._block_invoke_kernel, ptr @_Z12consume_datai._block_invoke_kernel, ptr @_Z12consume_datai._block_invoke_kernel, ptr @_Z12consume_datai._block_invoke_kernel, ptr @_Z12consume_datai._block_invoke_kernel, ptr @_Z12consume_datai._block_invoke_kernel, ptr @_Z12consume_datai._block_invoke_kernel, ptr @_Z12consume_datai._block_invoke_kernel, ptr @_Z12consume_datai._block_invoke_kernel, ptr @_Z12consume_datai._block_invoke_kernel>, <16 x ptr> {{.*}}, i32 8, <16 x i1> <i1 true, i1 true, i1 true, i1 true, i1 true, i1 true, i1 true, i1 true, i1 true, i1 true, i1 true, i1 true, i1 true, i1 true, i1 true, i1 true>)

  call void @llvm.masked.scatter.v16p0.v16p0(<16 x ptr> <ptr @_Z12consume_datai._block_invoke_kernel, ptr @_Z12consume_datai._block_invoke_kernel, ptr @_Z12consume_datai._block_invoke_kernel, ptr @_Z12consume_datai._block_invoke_kernel, ptr @_Z12consume_datai._block_invoke_kernel, ptr @_Z12consume_datai._block_invoke_kernel, ptr @_Z12consume_datai._block_invoke_kernel, ptr @_Z12consume_datai._block_invoke_kernel, ptr @_Z12consume_datai._block_invoke_kernel, ptr @_Z12consume_datai._block_invoke_kernel, ptr @_Z12consume_datai._block_invoke_kernel, ptr @_Z12consume_datai._block_invoke_kernel, ptr @_Z12consume_datai._block_invoke_kernel, ptr @_Z12consume_datai._block_invoke_kernel, ptr @_Z12consume_datai._block_invoke_kernel, ptr @_Z12consume_datai._block_invoke_kernel>, <16 x ptr> zeroinitializer, i32 8, <16 x i1> <i1 true, i1 true, i1 true, i1 true, i1 true, i1 true, i1 true, i1 true, i1 true, i1 true, i1 true, i1 true, i1 true, i1 true, i1 true, i1 true>)
  ret void
}

declare void @__ocl_task_sequence_async(ptr addrspace(4), i32, ptr addrspace(4), ptr addrspace(4), ptr addrspace(4), ptr addrspace(4), ptr addrspace(4))

; uselistorder directives
uselistorder ptr @_Z12produce_dataPiS_i._block_invoke_kernel, { 1, 0 }
uselistorder ptr @_Z12consume_datai._block_invoke_kernel, { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 17, 16 }
uselistorder ptr @__ocl_task_sequence_async, { 1, 0 }

attributes #0 = { nocallback nofree nosync nounwind willreturn memory(write) }

!sycl.kernels = !{!0}

!0 = !{ptr @_ZTSZZ4mainENKUlRN4sycl3_V17handlerEE_clES2_EUlNS0_14kernel_handlerEE_, ptr @_Z6my_sotPiS_i._block_invoke_kernel, ptr @_Z12produce_dataPiS_i._block_invoke_kernel, ptr @_Z12consume_datai._block_invoke_kernel}
!1 = !{!"char*", !"class.sycl::_V1::range", !"class.sycl::_V1::range", !"class.sycl::_V1::range", !"char*"}
!2 = !{ptr addrspace(1) null, ptr null, ptr null, ptr null, ptr addrspace(1) null}
!3 = !{ptr @_ZGVeN16uuuuu__ZTSZZ4mainENKUlRN4sycl3_V17handlerEE_clES2_EUlNS0_14kernel_handlerEE_}
!4 = !{ptr @_ZGVeN16u__Z6my_sotPiS_i._block_invoke_kernel}

; DEBUGIFY-COUNT-38: WARNING: Instruction with empty DebugLoc in function _ZTSZZ4mainENKUlRN4sycl3_V17handlerEE_clES2_EUlNS0_14kernel_handlerEE_
; DEBUGIFY-COUNT-28: WARNING: Instruction with empty DebugLoc in function _Z6my_sotPiS_i._block_invoke_kernel
; DEBUGIFY-COUNT-28: WARNING: Instruction with empty DebugLoc in function _Z12produce_dataPiS_i._block_invoke_kernel
; DEBUGIFY-COUNT-28: WARNING: Instruction with empty DebugLoc in function _Z12consume_datai._block_invoke_kernel
; DEBUGIFY-COUNT-38: WARNING: Instruction with empty DebugLoc in function _ZGVeN16uuuuu__ZTSZZ4mainENKUlRN4sycl3_V17handlerEE_clES2_EUlNS0_14kernel_handlerEE_
; DEBUGIFY-COUNT-28: WARNING: Instruction with empty DebugLoc in function _ZGVeN16u__Z6my_sotPiS_i._block_invoke_kernel
; DEBUGIFY-NOT: WARNING
