; NOTE: Assertions have been autogenerated by utils/update_test_checks.py
; RUN: opt -S -instcombine < %s | FileCheck %s

target datalayout = "e-m:e-i64:64-f80:128-n8:16:32:64-S128"
target triple = "x86_64-unknown-linux-gnu"

; Test case for cq369064 
define float @test(float %x) {
; CHECK-LABEL: @test(
; CHECK-NEXT:  entry:
; CHECK-NEXT:    [[CONV1:%.*]] = fmul fast float %x, 0x3FCDA67120000000
; CHECK-NEXT:    [[CONV4:%.*]] = fmul fast float %x, 0x3FB99999A0000000
; CHECK-NEXT:    [[CONV6:%.*]] = fadd fast float [[CONV1]], 0x400BB59040000000
; CHECK-NEXT:    [[CONV8:%.*]] = fsub fast float 0x40147F56C0000000, [[CONV4]]
; CHECK-NEXT:    [[CONV10:%.*]] = fdiv fast float 0x3FFB333340000000, [[CONV6]]
; CHECK-NEXT:    [[ADD11:%.*]] = fadd fast float [[CONV10]], [[CONV8]]
; CHECK-NEXT:    ret float [[ADD11]]
;
entry:
  %conv = fpext float %x to double
  %mul = fmul fast double 2.316419e-01, %conv
  %conv1 = fptrunc double %mul to float
  %conv2 = fpext float %x to double
  %mul3 = fmul fast double %conv2, 1.000000e-01
  %conv4 = fptrunc double %mul3 to float
  %conv5 = fpext float %conv1 to double
  %add = fadd fast double 0x400BB59047E14021, %conv5
  %conv6 = fptrunc double %add to float
  %conv7 = fpext float %conv4 to double
  %sub = fsub fast double 0x40147F56BBCE77C8, %conv7
  %conv8 = fptrunc double %sub to float
  %conv9 = fpext float %conv6 to double
  %div = fdiv fast double 1.700000e+00, %conv9
  %conv10 = fptrunc double %div to float
  %add11 = fadd fast float %conv10, %conv8
  ret float %add11
}
