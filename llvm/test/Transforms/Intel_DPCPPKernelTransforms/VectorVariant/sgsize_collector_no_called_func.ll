; NOTE: Assertions have been autogenerated by utils/intel_update_vplan_checks.py
; RUN: opt %s -dpcpp-enable-direct-function-call-vectorization=true -dpcpp-kernel-sg-size-collector -S -enable-debugify -disable-output 2>&1 | FileCheck %s -check-prefix=DEBUGIFY
; RUN: opt %s -dpcpp-enable-direct-function-call-vectorization=true -dpcpp-kernel-sg-size-collector -S | FileCheck %s
; RUN: opt %s -dpcpp-enable-direct-function-call-vectorization=true -passes=dpcpp-kernel-sg-size-collector -S -enable-debugify -disable-output 2>&1 | FileCheck %s -check-prefix=DEBUGIFY
; RUN: opt %s -dpcpp-enable-direct-function-call-vectorization=true -passes=dpcpp-kernel-sg-size-collector -S | FileCheck %s

;; Check for succesful compilation. No attributes have been added.

target datalayout = "e-m:e-p270:32:32-p271:32:32-p272:64:64-i64:64-f80:128-n8:16:32:64-S128"
target triple = "x86_64-pc-linux"

define void @test_inline_asm_nop() !recommended_vector_length !1 {
; CHECK:  define void @test_inline_asm_nop() !recommended_vector_length !1 {
; CHECK-NEXT:  entry:
; CHECK-NEXT:    tail call void asm sideeffect "nop\0A", ""()
; CHECK-NEXT:    ret void
; CHECK-NEXT:  }
; CHECK-EMPTY:
; CHECK-NEXT: !sycl.kernels = !{!0}
; CHECK-EMPTY:
; CHECK-NEXT: !0 = !{void ()* @test_inline_asm_nop}
; CHECK-NEXT: !1 = !{i32 16}
entry:
  tail call void asm sideeffect "nop\0A", ""()
  ret void
}

!sycl.kernels = !{!0}

!0 = !{void ()* @test_inline_asm_nop}
!1 = !{i32 16}

; DEBUGIFY-NOT: WARNING
