; NOTE: Assertions have been autogenerated by utils/intel_update_vplan_checks.py
; RUN: opt -passes='hir-ssa-deconstruction,hir-temp-cleanup,hir-vec-dir-insert,hir-vplan-vec,print<hir>' -disable-nonlinear-mmindex=0 -disable-output %s 2>&1 | FileCheck %s
;
; Test checks that FP data type is unsupported as minmax main reduction.
;
; CHECK-NOT: experimental.vector.reduce.
;
; Function Attrs: nounwind readonly uwtable
define dso_local double @_Z3fooPdi(double* nocapture readonly %x, i32 %n) local_unnamed_addr #0 {
entry:
  br label %for.body.preheader

for.body.preheader:                               ; preds = %entry
  %0 = load double, double* %x, align 8
  %wide.trip.count20 = zext i32 %n to i64
  br label %for.body

for.cond.cleanup.loopexit:                        ; preds = %for.body
  %.lcssa = phi i32 [ %3, %for.body ]
  %indmax.0.lcssa = sitofp i32 %.lcssa to double
  ret double %indmax.0.lcssa

for.body:                                         ; preds = %for.body.preheader, %for.body
  %indvars.iv = phi i64 [ 1, %for.body.preheader ], [ %indvars.iv.next, %for.body ]
  %max.018 = phi double [ %0, %for.body.preheader ], [ %4, %for.body ]
  %indmax.017 = phi i32 [ 0, %for.body.preheader ], [ %3, %for.body ]
  %ptridx1 = getelementptr inbounds double, double* %x, i64 %indvars.iv
  %1 = load double, double* %ptridx1, align 8
  %cmp2 = fcmp ogt double %1, %max.018
  %2 = trunc i64 %indvars.iv to i32
  %3 = select i1 %cmp2, i32 %2, i32 %indmax.017
  %4 = select i1 %cmp2, double %1, double %max.018
  %indvars.iv.next = add nuw nsw i64 %indvars.iv, 1
  %exitcond = icmp eq i64 %indvars.iv.next, %wide.trip.count20
  br i1 %exitcond, label %for.cond.cleanup.loopexit, label %for.body
}

