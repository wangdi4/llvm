; NOTE: Assertions have been autogenerated by utils/update_test_checks.py
; RUN: opt < %s -reassociate -S | FileCheck %s
; RUN: opt < %s -passes='reassociate' -S | FileCheck %s

; Verify the metadata is preserved through the floating-point transform

define float @test(float %X, float %Y) {
; CHECK-LABEL: @test(
; CHECK-NEXT:    [[A:%.*]] = fmul float [[X:%.*]], 4.500000e+00
; CHECK-NEXT:    [[B:%.*]] = fsub float [[Y:%.*]], [[A]], !md !0
; CHECK-NEXT:    ret float [[B]]
;
  %A = fmul float %X, -4.500000e+00
  %B = fadd float %A, %Y, !md !0
  ret float %B
}

!0 = !{i32 0}