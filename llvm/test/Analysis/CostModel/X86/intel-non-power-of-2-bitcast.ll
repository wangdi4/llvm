; NOTE: Assertions have been autogenerated by utils/update_analyze_test_checks.py
; RUN: opt < %s -mtriple=x86_64-apple-darwin -cost-model -analyze -mattr=+sse4.2 | FileCheck %s --check-prefixes=X86_64-SSE
; RUN: opt < %s -mtriple=x86_64-apple-darwin -cost-model -analyze -mattr=+avx2 | FileCheck %s --check-prefixes=X86_64-AVX2
; RUN: opt < %s -mtriple=x86_64-apple-darwin -cost-model -analyze -mattr=+avx512f,+avx512dq,,+avx512bw,+avx512vl | FileCheck %s --check-prefixes=X86_64-AVX512-VL-BW

define i32 @bitcast_to_scalar() {
; X86_64-SSE-LABEL: 'bitcast_to_scalar'
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %V3i1 = bitcast <3 x i1> undef to i3
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %V7i1 = bitcast <7 x i1> undef to i7
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %V9i1 = bitcast <9 x i1> undef to i9
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 33 for instruction: %V33i1 = bitcast <33 x i1> undef to i33
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %V3i8 = bitcast <3 x i8> undef to i24
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %V7i8 = bitcast <7 x i8> undef to i56
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 9 for instruction: %V9i8 = bitcast <9 x i8> undef to i72
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 33 for instruction: %V33i8 = bitcast <33 x i8> undef to i264
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %V3i16 = bitcast <3 x i16> undef to i48
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 7 for instruction: %V7i16 = bitcast <7 x i16> undef to i112
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 9 for instruction: %V9i16 = bitcast <9 x i16> undef to i144
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 33 for instruction: %V33i16 = bitcast <33 x i16> undef to i528
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 3 for instruction: %V3i32 = bitcast <3 x i32> undef to i96
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 7 for instruction: %V7i32 = bitcast <7 x i32> undef to i224
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 9 for instruction: %V9i32 = bitcast <9 x i32> undef to i288
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 33 for instruction: %V33i32 = bitcast <33 x i32> undef to i1056
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 3 for instruction: %V3i64 = bitcast <3 x i64> undef to i192
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 7 for instruction: %V7i64 = bitcast <7 x i64> undef to i448
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 9 for instruction: %V9i64 = bitcast <9 x i64> undef to i576
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 33 for instruction: %V33i64 = bitcast <33 x i64> undef to i2112
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 0 for instruction: ret i32 undef
;
; X86_64-AVX2-LABEL: 'bitcast_to_scalar'
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %V3i1 = bitcast <3 x i1> undef to i3
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %V7i1 = bitcast <7 x i1> undef to i7
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %V9i1 = bitcast <9 x i1> undef to i9
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 49 for instruction: %V33i1 = bitcast <33 x i1> undef to i33
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %V3i8 = bitcast <3 x i8> undef to i24
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %V7i8 = bitcast <7 x i8> undef to i56
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 9 for instruction: %V9i8 = bitcast <9 x i8> undef to i72
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 49 for instruction: %V33i8 = bitcast <33 x i8> undef to i264
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %V3i16 = bitcast <3 x i16> undef to i48
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 7 for instruction: %V7i16 = bitcast <7 x i16> undef to i112
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 10 for instruction: %V9i16 = bitcast <9 x i16> undef to i144
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 49 for instruction: %V33i16 = bitcast <33 x i16> undef to i528
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 3 for instruction: %V3i32 = bitcast <3 x i32> undef to i96
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 10 for instruction: %V7i32 = bitcast <7 x i32> undef to i224
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 13 for instruction: %V9i32 = bitcast <9 x i32> undef to i288
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 49 for instruction: %V33i32 = bitcast <33 x i32> undef to i1056
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 4 for instruction: %V3i64 = bitcast <3 x i64> undef to i192
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 10 for instruction: %V7i64 = bitcast <7 x i64> undef to i448
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 13 for instruction: %V9i64 = bitcast <9 x i64> undef to i576
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 49 for instruction: %V33i64 = bitcast <33 x i64> undef to i2112
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 0 for instruction: ret i32 undef
;
; X86_64-AVX512-VL-BW-LABEL: 'bitcast_to_scalar'
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %V3i1 = bitcast <3 x i1> undef to i3
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %V7i1 = bitcast <7 x i1> undef to i7
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %V9i1 = bitcast <9 x i1> undef to i9
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %V33i1 = bitcast <33 x i1> undef to i33
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %V3i8 = bitcast <3 x i8> undef to i24
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %V7i8 = bitcast <7 x i8> undef to i56
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 9 for instruction: %V9i8 = bitcast <9 x i8> undef to i72
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 50 for instruction: %V33i8 = bitcast <33 x i8> undef to i264
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %V3i16 = bitcast <3 x i16> undef to i48
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 7 for instruction: %V7i16 = bitcast <7 x i16> undef to i112
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 10 for instruction: %V9i16 = bitcast <9 x i16> undef to i144
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 57 for instruction: %V33i16 = bitcast <33 x i16> undef to i528
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 3 for instruction: %V3i32 = bitcast <3 x i32> undef to i96
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 10 for instruction: %V7i32 = bitcast <7 x i32> undef to i224
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 14 for instruction: %V9i32 = bitcast <9 x i32> undef to i288
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 57 for instruction: %V33i32 = bitcast <33 x i32> undef to i1056
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 4 for instruction: %V3i64 = bitcast <3 x i64> undef to i192
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 12 for instruction: %V7i64 = bitcast <7 x i64> undef to i448
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 15 for instruction: %V9i64 = bitcast <9 x i64> undef to i576
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 57 for instruction: %V33i64 = bitcast <33 x i64> undef to i2112
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 0 for instruction: ret i32 undef
;
  %V3i1 = bitcast <3 x i1> undef to i3
  %V7i1 = bitcast <7 x i1> undef to i7
  %V9i1 = bitcast <9 x i1> undef to i9
  %V33i1 = bitcast <33 x i1> undef to i33

  %V3i8 = bitcast <3 x i8> undef to i24
  %V7i8 = bitcast <7 x i8> undef to i56
  %V9i8 = bitcast <9 x i8> undef to i72
  %V33i8 = bitcast <33 x i8> undef to i264

  %V3i16 = bitcast <3 x i16> undef to i48
  %V7i16 = bitcast <7 x i16> undef to i112
  %V9i16 = bitcast <9 x i16> undef to i144
  %V33i16 = bitcast <33 x i16> undef to i528

  %V3i32 = bitcast <3 x i32> undef to i96
  %V7i32 = bitcast <7 x i32> undef to i224
  %V9i32 = bitcast <9 x i32> undef to i288
  %V33i32 = bitcast <33 x i32> undef to i1056

  %V3i64 = bitcast <3 x i64> undef to i192
  %V7i64 = bitcast <7 x i64> undef to i448
  %V9i64 = bitcast <9 x i64> undef to i576
  %V33i64 = bitcast <33 x i64> undef to i2112

  ret i32 undef
}

