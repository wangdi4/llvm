; NOTE: Assertions have been autogenerated by utils/update_analyze_test_checks.py
; RUN: opt < %s -mtriple=x86_64-apple-darwin -cost-model -analyze -mattr=+sse4.2 | FileCheck %s --check-prefixes=X86_64-SSE
; RUN: opt < %s -mtriple=x86_64-apple-darwin -cost-model -analyze -mattr=+avx2 | FileCheck %s --check-prefixes=X86_64-AVX2
; RUN: opt < %s -mtriple=x86_64-apple-darwin -cost-model -analyze -mattr=+avx512f,+avx512dq,,+avx512bw,+avx512vl | FileCheck %s --check-prefixes=X86_64-AVX512-VL-BW

define i32 @fptoui_double_i64(i32 %arg) {
; X86_64-SSE-LABEL: 'fptoui_double_i64'
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 18 for instruction: %V3I64 = fptoui <3 x double> undef to <3 x i64>
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 42 for instruction: %V7I64 = fptoui <7 x double> undef to <7 x i64>
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 54 for instruction: %V9I64 = fptoui <9 x double> undef to <9 x i64>
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 0 for instruction: ret i32 undef
;
; X86_64-AVX2-LABEL: 'fptoui_double_i64'
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 20 for instruction: %V3I64 = fptoui <3 x double> undef to <3 x i64>
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 47 for instruction: %V7I64 = fptoui <7 x double> undef to <7 x i64>
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 62 for instruction: %V9I64 = fptoui <9 x double> undef to <9 x i64>
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 0 for instruction: ret i32 undef
;
; X86_64-AVX512-VL-BW-LABEL: 'fptoui_double_i64'
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %V3I64 = fptoui <3 x double> undef to <3 x i64>
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %V7I64 = fptoui <7 x double> undef to <7 x i64>
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 2 for instruction: %V9I64 = fptoui <9 x double> undef to <9 x i64>
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 0 for instruction: ret i32 undef
;
  %V3I64 = fptoui <3 x double> undef to <3 x i64>
  %V7I64 = fptoui <7 x double> undef to <7 x i64>
  %V9I64 = fptoui <9 x double> undef to <9 x i64>
  ret i32 undef
}

define i32 @fptoui_double_i32(i32 %arg) {
; X86_64-SSE-LABEL: 'fptoui_double_i32'
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 9 for instruction: %V3I32 = fptoui <3 x double> undef to <3 x i32>
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 21 for instruction: %V7I32 = fptoui <7 x double> undef to <7 x i32>
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 27 for instruction: %V9I32 = fptoui <9 x double> undef to <9 x i32>
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 0 for instruction: ret i32 undef
;
; X86_64-AVX2-LABEL: 'fptoui_double_i32'
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 16 for instruction: %V3I32 = fptoui <3 x double> undef to <3 x i32>
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 25 for instruction: %V7I32 = fptoui <7 x double> undef to <7 x i32>
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 33 for instruction: %V9I32 = fptoui <9 x double> undef to <9 x i32>
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 0 for instruction: ret i32 undef
;
; X86_64-AVX512-VL-BW-LABEL: 'fptoui_double_i32'
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %V3I32 = fptoui <3 x double> undef to <3 x i32>
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %V7I32 = fptoui <7 x double> undef to <7 x i32>
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 35 for instruction: %V9I32 = fptoui <9 x double> undef to <9 x i32>
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 0 for instruction: ret i32 undef
;
  %V3I32 = fptoui <3 x double> undef to <3 x i32>
  %V7I32 = fptoui <7 x double> undef to <7 x i32>
  %V9I32 = fptoui <9 x double> undef to <9 x i32>
  ret i32 undef
}

define i32 @fptoui_double_i16(i32 %arg) {
; X86_64-SSE-LABEL: 'fptoui_double_i16'
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 9 for instruction: %V3I16 = fptoui <3 x double> undef to <3 x i16>
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 21 for instruction: %V7I16 = fptoui <7 x double> undef to <7 x i16>
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 27 for instruction: %V9I16 = fptoui <9 x double> undef to <9 x i16>
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 0 for instruction: ret i32 undef
;
; X86_64-AVX2-LABEL: 'fptoui_double_i16'
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 2 for instruction: %V3I16 = fptoui <3 x double> undef to <3 x i16>
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 21 for instruction: %V7I16 = fptoui <7 x double> undef to <7 x i16>
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 29 for instruction: %V9I16 = fptoui <9 x double> undef to <9 x i16>
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 0 for instruction: ret i32 undef
;
; X86_64-AVX512-VL-BW-LABEL: 'fptoui_double_i16'
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 2 for instruction: %V3I16 = fptoui <3 x double> undef to <3 x i16>
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 3 for instruction: %V7I16 = fptoui <7 x double> undef to <7 x i16>
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 29 for instruction: %V9I16 = fptoui <9 x double> undef to <9 x i16>
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 0 for instruction: ret i32 undef
;
  %V3I16 = fptoui <3 x double> undef to <3 x i16>
  %V7I16 = fptoui <7 x double> undef to <7 x i16>
  %V9I16 = fptoui <9 x double> undef to <9 x i16>
  ret i32 undef
}

define i32 @fptoui_double_i8(i32 %arg) {
; X86_64-SSE-LABEL: 'fptoui_double_i8'
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 9 for instruction: %V3I8 = fptoui <3 x double> undef to <3 x i8>
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 21 for instruction: %V7I8 = fptoui <7 x double> undef to <7 x i8>
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 27 for instruction: %V9I8 = fptoui <9 x double> undef to <9 x i8>
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 0 for instruction: ret i32 undef
;
; X86_64-AVX2-LABEL: 'fptoui_double_i8'
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 3 for instruction: %V3I8 = fptoui <3 x double> undef to <3 x i8>
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 21 for instruction: %V7I8 = fptoui <7 x double> undef to <7 x i8>
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 27 for instruction: %V9I8 = fptoui <9 x double> undef to <9 x i8>
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 0 for instruction: ret i32 undef
;
; X86_64-AVX512-VL-BW-LABEL: 'fptoui_double_i8'
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 3 for instruction: %V3I8 = fptoui <3 x double> undef to <3 x i8>
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 3 for instruction: %V7I8 = fptoui <7 x double> undef to <7 x i8>
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 27 for instruction: %V9I8 = fptoui <9 x double> undef to <9 x i8>
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 0 for instruction: ret i32 undef
;
  %V3I8 = fptoui <3 x double> undef to <3 x i8>
  %V7I8 = fptoui <7 x double> undef to <7 x i8>
  %V9I8 = fptoui <9 x double> undef to <9 x i8>
  ret i32 undef
}

define i32 @fptoui_float_i64(i32 %arg) {
; X86_64-SSE-LABEL: 'fptoui_float_i64'
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 18 for instruction: %V3I64 = fptoui <3 x float> undef to <3 x i64>
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 42 for instruction: %V7I64 = fptoui <7 x float> undef to <7 x i64>
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 54 for instruction: %V9I64 = fptoui <9 x float> undef to <9 x i64>
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 198 for instruction: %V33I64 = fptoui <33 x float> undef to <33 x i64>
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 0 for instruction: ret i32 undef
;
; X86_64-AVX2-LABEL: 'fptoui_float_i64'
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 20 for instruction: %V3I64 = fptoui <3 x float> undef to <3 x i64>
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 47 for instruction: %V7I64 = fptoui <7 x float> undef to <7 x i64>
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 62 for instruction: %V9I64 = fptoui <9 x float> undef to <9 x i64>
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 230 for instruction: %V33I64 = fptoui <33 x float> undef to <33 x i64>
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 0 for instruction: ret i32 undef
;
; X86_64-AVX512-VL-BW-LABEL: 'fptoui_float_i64'
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %V3I64 = fptoui <3 x float> undef to <3 x i64>
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %V7I64 = fptoui <7 x float> undef to <7 x i64>
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 39 for instruction: %V9I64 = fptoui <9 x float> undef to <9 x i64>
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 147 for instruction: %V33I64 = fptoui <33 x float> undef to <33 x i64>
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 0 for instruction: ret i32 undef
;
  %V3I64 = fptoui <3 x float> undef to <3 x i64>
  %V7I64 = fptoui <7 x float> undef to <7 x i64>
  %V9I64 = fptoui <9 x float> undef to <9 x i64>
  %V33I64 = fptoui <33 x float> undef to <33 x i64>
  ret i32 undef
}

define i32 @fptoui_float_i32(i32 %arg) {
; X86_64-SSE-LABEL: 'fptoui_float_i32'
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 9 for instruction: %V3I32 = fptoui <3 x float> undef to <3 x i32>
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 21 for instruction: %V7I32 = fptoui <7 x float> undef to <7 x i32>
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 27 for instruction: %V9I32 = fptoui <9 x float> undef to <9 x i32>
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 99 for instruction: %V33I32 = fptoui <33 x float> undef to <33 x i32>
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 0 for instruction: ret i32 undef
;
; X86_64-AVX2-LABEL: 'fptoui_float_i32'
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 9 for instruction: %V3I32 = fptoui <3 x float> undef to <3 x i32>
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 32 for instruction: %V7I32 = fptoui <7 x float> undef to <7 x i32>
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 33 for instruction: %V9I32 = fptoui <9 x float> undef to <9 x i32>
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 123 for instruction: %V33I32 = fptoui <33 x float> undef to <33 x i32>
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 0 for instruction: ret i32 undef
;
; X86_64-AVX512-VL-BW-LABEL: 'fptoui_float_i32'
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %V3I32 = fptoui <3 x float> undef to <3 x i32>
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %V7I32 = fptoui <7 x float> undef to <7 x i32>
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %V9I32 = fptoui <9 x float> undef to <9 x i32>
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 4 for instruction: %V33I32 = fptoui <33 x float> undef to <33 x i32>
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 0 for instruction: ret i32 undef
;
  %V3I32 = fptoui <3 x float> undef to <3 x i32>
  %V7I32 = fptoui <7 x float> undef to <7 x i32>
  %V9I32 = fptoui <9 x float> undef to <9 x i32>
  %V33I32 = fptoui <33 x float> undef to <33 x i32>
  ret i32 undef
}

define i32 @fptoui_float_i16(i32 %arg) {
; X86_64-SSE-LABEL: 'fptoui_float_i16'
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 2 for instruction: %V3I16 = fptoui <3 x float> undef to <3 x i16>
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 21 for instruction: %V7I16 = fptoui <7 x float> undef to <7 x i16>
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 27 for instruction: %V9I16 = fptoui <9 x float> undef to <9 x i16>
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 99 for instruction: %V33I16 = fptoui <33 x float> undef to <33 x i16>
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 0 for instruction: ret i32 undef
;
; X86_64-AVX2-LABEL: 'fptoui_float_i16'
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 2 for instruction: %V3I16 = fptoui <3 x float> undef to <3 x i16>
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 3 for instruction: %V7I16 = fptoui <7 x float> undef to <7 x i16>
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 29 for instruction: %V9I16 = fptoui <9 x float> undef to <9 x i16>
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 119 for instruction: %V33I16 = fptoui <33 x float> undef to <33 x i16>
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 0 for instruction: ret i32 undef
;
; X86_64-AVX512-VL-BW-LABEL: 'fptoui_float_i16'
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 2 for instruction: %V3I16 = fptoui <3 x float> undef to <3 x i16>
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 3 for instruction: %V7I16 = fptoui <7 x float> undef to <7 x i16>
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 3 for instruction: %V9I16 = fptoui <9 x float> undef to <9 x i16>
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 129 for instruction: %V33I16 = fptoui <33 x float> undef to <33 x i16>
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 0 for instruction: ret i32 undef
;
  %V3I16 = fptoui <3 x float> undef to <3 x i16>
  %V7I16 = fptoui <7 x float> undef to <7 x i16>
  %V9I16 = fptoui <9 x float> undef to <9 x i16>
  %V33I16 = fptoui <33 x float> undef to <33 x i16>
  ret i32 undef
}

define i32 @fptoui_float_i8(i32 %arg) {
; X86_64-SSE-LABEL: 'fptoui_float_i8'
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 3 for instruction: %V3I8 = fptoui <3 x float> undef to <3 x i8>
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 21 for instruction: %V7I8 = fptoui <7 x float> undef to <7 x i8>
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 27 for instruction: %V9I8 = fptoui <9 x float> undef to <9 x i8>
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 99 for instruction: %V33I8 = fptoui <33 x float> undef to <33 x i8>
; X86_64-SSE-NEXT:  Cost Model: Found an estimated cost of 0 for instruction: ret i32 undef
;
; X86_64-AVX2-LABEL: 'fptoui_float_i8'
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 3 for instruction: %V3I8 = fptoui <3 x float> undef to <3 x i8>
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 4 for instruction: %V7I8 = fptoui <7 x float> undef to <7 x i8>
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 27 for instruction: %V9I8 = fptoui <9 x float> undef to <9 x i8>
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 117 for instruction: %V33I8 = fptoui <33 x float> undef to <33 x i8>
; X86_64-AVX2-NEXT:  Cost Model: Found an estimated cost of 0 for instruction: ret i32 undef
;
; X86_64-AVX512-VL-BW-LABEL: 'fptoui_float_i8'
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 3 for instruction: %V3I8 = fptoui <3 x float> undef to <3 x i8>
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 3 for instruction: %V7I8 = fptoui <7 x float> undef to <7 x i8>
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 3 for instruction: %V9I8 = fptoui <9 x float> undef to <9 x i8>
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 119 for instruction: %V33I8 = fptoui <33 x float> undef to <33 x i8>
; X86_64-AVX512-VL-BW-NEXT:  Cost Model: Found an estimated cost of 0 for instruction: ret i32 undef
;
  %V3I8 = fptoui <3 x float> undef to <3 x i8>
  %V7I8 = fptoui <7 x float> undef to <7 x i8>
  %V9I8 = fptoui <9 x float> undef to <9 x i8>
  %V33I8 = fptoui <33 x float> undef to <33 x i8>
  ret i32 undef
}
