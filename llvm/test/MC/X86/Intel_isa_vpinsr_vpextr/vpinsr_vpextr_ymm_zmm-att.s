// REQUIRES: intel_feature_isa_vpinsr_vpextr
// RUN: llvm-mc -triple i386 --show-encoding %s | FileCheck %s

// CHECK: vpextrb $123, %zmm3, %ecx
// CHECK: encoding: [0x62,0xf3,0x7d,0x48,0x14,0xd9,0x7b]
          vpextrb $123, %zmm3, %ecx

// CHECK: vpextrb $123, %ymm3, %ecx
// CHECK: encoding: [0x62,0xf3,0x7d,0x28,0x14,0xd9,0x7b]
          vpextrb $123, %ymm3, %ecx

// CHECK: vpextrb  $123, %zmm3, 268435456(%esp,%esi,8)
// CHECK: encoding: [0x62,0xf3,0x7d,0x48,0x14,0x9c,0xf4,0x00,0x00,0x00,0x10,0x7b]
          vpextrb  $123, %zmm3, 268435456(%esp,%esi,8)

// CHECK: vpextrb  $123, %zmm3, 291(%edi,%eax,4)
// CHECK: encoding: [0x62,0xf3,0x7d,0x48,0x14,0x9c,0x87,0x23,0x01,0x00,0x00,0x7b]
          vpextrb  $123, %zmm3, 291(%edi,%eax,4)

// CHECK: vpextrb  $123, %zmm3, (%eax)
// CHECK: encoding: [0x62,0xf3,0x7d,0x48,0x14,0x18,0x7b]
          vpextrb  $123, %zmm3, (%eax)

// CHECK: vpextrb  $123, %zmm3, -32(,%ebp,2)
// CHECK: encoding: [0x62,0xf3,0x7d,0x48,0x14,0x1c,0x6d,0xe0,0xff,0xff,0xff,0x7b]
          vpextrb  $123, %zmm3, -32(,%ebp,2)

// CHECK: vpextrb  $123, %zmm3, 127(%ecx)
// CHECK: encoding: [0x62,0xf3,0x7d,0x48,0x14,0x59,0x7f,0x7b]
          vpextrb  $123, %zmm3, 127(%ecx)

// CHECK: vpextrb  $123, %zmm3, -128(%edx)
// CHECK: encoding: [0x62,0xf3,0x7d,0x48,0x14,0x5a,0x80,0x7b]
          vpextrb  $123, %zmm3, -128(%edx)

// CHECK: vpextrb  $123, %ymm3, 268435456(%esp,%esi,8)
// CHECK: encoding: [0x62,0xf3,0x7d,0x28,0x14,0x9c,0xf4,0x00,0x00,0x00,0x10,0x7b]
          vpextrb  $123, %ymm3, 268435456(%esp,%esi,8)

// CHECK: vpextrb  $123, %ymm3, 291(%edi,%eax,4)
// CHECK: encoding: [0x62,0xf3,0x7d,0x28,0x14,0x9c,0x87,0x23,0x01,0x00,0x00,0x7b]
          vpextrb  $123, %ymm3, 291(%edi,%eax,4)

// CHECK: vpextrb  $123, %ymm3, (%eax)
// CHECK: encoding: [0x62,0xf3,0x7d,0x28,0x14,0x18,0x7b]
          vpextrb  $123, %ymm3, (%eax)

// CHECK: vpextrb  $123, %ymm3, -32(,%ebp,2)
// CHECK: encoding: [0x62,0xf3,0x7d,0x28,0x14,0x1c,0x6d,0xe0,0xff,0xff,0xff,0x7b]
          vpextrb  $123, %ymm3, -32(,%ebp,2)

// CHECK: vpextrb  $123, %ymm3, 127(%ecx)
// CHECK: encoding: [0x62,0xf3,0x7d,0x28,0x14,0x59,0x7f,0x7b]
          vpextrb  $123, %ymm3, 127(%ecx)

// CHECK: vpextrb  $123, %ymm3, -128(%edx)
// CHECK: encoding: [0x62,0xf3,0x7d,0x28,0x14,0x5a,0x80,0x7b]
          vpextrb  $123, %ymm3, -128(%edx)

// CHECK: vpextrd $123, %ymm3, %ecx
// CHECK: encoding: [0x62,0xf3,0x7d,0x28,0x16,0xd9,0x7b]
          vpextrd $123, %ymm3, %ecx

// CHECK: vpextrd $123, %zmm3, %ecx
// CHECK: encoding: [0x62,0xf3,0x7d,0x48,0x16,0xd9,0x7b]
          vpextrd $123, %zmm3, %ecx

// CHECK: vpextrd  $123, %ymm3, 268435456(%esp,%esi,8)
// CHECK: encoding: [0x62,0xf3,0x7d,0x28,0x16,0x9c,0xf4,0x00,0x00,0x00,0x10,0x7b]
          vpextrd  $123, %ymm3, 268435456(%esp,%esi,8)

// CHECK: vpextrd  $123, %ymm3, 291(%edi,%eax,4)
// CHECK: encoding: [0x62,0xf3,0x7d,0x28,0x16,0x9c,0x87,0x23,0x01,0x00,0x00,0x7b]
          vpextrd  $123, %ymm3, 291(%edi,%eax,4)

// CHECK: vpextrd  $123, %ymm3, (%eax)
// CHECK: encoding: [0x62,0xf3,0x7d,0x28,0x16,0x18,0x7b]
          vpextrd  $123, %ymm3, (%eax)

// CHECK: vpextrd  $123, %ymm3, -128(,%ebp,2)
// CHECK: encoding: [0x62,0xf3,0x7d,0x28,0x16,0x1c,0x6d,0x80,0xff,0xff,0xff,0x7b]
          vpextrd  $123, %ymm3, -128(,%ebp,2)

// CHECK: vpextrd  $123, %ymm3, 508(%ecx)
// CHECK: encoding: [0x62,0xf3,0x7d,0x28,0x16,0x59,0x7f,0x7b]
          vpextrd  $123, %ymm3, 508(%ecx)

// CHECK: vpextrd  $123, %ymm3, -512(%edx)
// CHECK: encoding: [0x62,0xf3,0x7d,0x28,0x16,0x5a,0x80,0x7b]
          vpextrd  $123, %ymm3, -512(%edx)

// CHECK: vpextrd  $123, %zmm3, 268435456(%esp,%esi,8)
// CHECK: encoding: [0x62,0xf3,0x7d,0x48,0x16,0x9c,0xf4,0x00,0x00,0x00,0x10,0x7b]
          vpextrd  $123, %zmm3, 268435456(%esp,%esi,8)

// CHECK: vpextrd  $123, %zmm3, 291(%edi,%eax,4)
// CHECK: encoding: [0x62,0xf3,0x7d,0x48,0x16,0x9c,0x87,0x23,0x01,0x00,0x00,0x7b]
          vpextrd  $123, %zmm3, 291(%edi,%eax,4)

// CHECK: vpextrd  $123, %zmm3, (%eax)
// CHECK: encoding: [0x62,0xf3,0x7d,0x48,0x16,0x18,0x7b]
          vpextrd  $123, %zmm3, (%eax)

// CHECK: vpextrd  $123, %zmm3, -128(,%ebp,2)
// CHECK: encoding: [0x62,0xf3,0x7d,0x48,0x16,0x1c,0x6d,0x80,0xff,0xff,0xff,0x7b]
          vpextrd  $123, %zmm3, -128(,%ebp,2)

// CHECK: vpextrd  $123, %zmm3, 508(%ecx)
// CHECK: encoding: [0x62,0xf3,0x7d,0x48,0x16,0x59,0x7f,0x7b]
          vpextrd  $123, %zmm3, 508(%ecx)

// CHECK: vpextrd  $123, %zmm3, -512(%edx)
// CHECK: encoding: [0x62,0xf3,0x7d,0x48,0x16,0x5a,0x80,0x7b]
          vpextrd  $123, %zmm3, -512(%edx)

// CHECK: vpextrw $123, %zmm3, %ecx
// CHECK: encoding: [0x62,0xf1,0x7d,0x48,0xc5,0xcb,0x7b]
          vpextrw $123, %zmm3, %ecx

// CHECK: vpextrw $123, %ymm3, %ecx
// CHECK: encoding: [0x62,0xf1,0x7d,0x28,0xc5,0xcb,0x7b]
          vpextrw $123, %ymm3, %ecx

// CHECK: vpextrw  $123, %ymm3, 268435456(%esp,%esi,8)
// CHECK: encoding: [0x62,0xf3,0x7d,0x28,0x15,0x9c,0xf4,0x00,0x00,0x00,0x10,0x7b]
          vpextrw  $123, %ymm3, 268435456(%esp,%esi,8)

// CHECK: vpextrw  $123, %ymm3, 291(%edi,%eax,4)
// CHECK: encoding: [0x62,0xf3,0x7d,0x28,0x15,0x9c,0x87,0x23,0x01,0x00,0x00,0x7b]
          vpextrw  $123, %ymm3, 291(%edi,%eax,4)

// CHECK: vpextrw  $123, %ymm3, (%eax)
// CHECK: encoding: [0x62,0xf3,0x7d,0x28,0x15,0x18,0x7b]
          vpextrw  $123, %ymm3, (%eax)

// CHECK: vpextrw  $123, %ymm3, -64(,%ebp,2)
// CHECK: encoding: [0x62,0xf3,0x7d,0x28,0x15,0x1c,0x6d,0xc0,0xff,0xff,0xff,0x7b]
          vpextrw  $123, %ymm3, -64(,%ebp,2)

// CHECK: vpextrw  $123, %ymm3, 254(%ecx)
// CHECK: encoding: [0x62,0xf3,0x7d,0x28,0x15,0x59,0x7f,0x7b]
          vpextrw  $123, %ymm3, 254(%ecx)

// CHECK: vpextrw  $123, %ymm3, -256(%edx)
// CHECK: encoding: [0x62,0xf3,0x7d,0x28,0x15,0x5a,0x80,0x7b]
          vpextrw  $123, %ymm3, -256(%edx)

// CHECK: vpextrw  $123, %zmm3, 268435456(%esp,%esi,8)
// CHECK: encoding: [0x62,0xf3,0x7d,0x48,0x15,0x9c,0xf4,0x00,0x00,0x00,0x10,0x7b]
          vpextrw  $123, %zmm3, 268435456(%esp,%esi,8)

// CHECK: vpextrw  $123, %zmm3, 291(%edi,%eax,4)
// CHECK: encoding: [0x62,0xf3,0x7d,0x48,0x15,0x9c,0x87,0x23,0x01,0x00,0x00,0x7b]
          vpextrw  $123, %zmm3, 291(%edi,%eax,4)

// CHECK: vpextrw  $123, %zmm3, (%eax)
// CHECK: encoding: [0x62,0xf3,0x7d,0x48,0x15,0x18,0x7b]
          vpextrw  $123, %zmm3, (%eax)

// CHECK: vpextrw  $123, %zmm3, -64(,%ebp,2)
// CHECK: encoding: [0x62,0xf3,0x7d,0x48,0x15,0x1c,0x6d,0xc0,0xff,0xff,0xff,0x7b]
          vpextrw  $123, %zmm3, -64(,%ebp,2)

// CHECK: vpextrw  $123, %zmm3, 254(%ecx)
// CHECK: encoding: [0x62,0xf3,0x7d,0x48,0x15,0x59,0x7f,0x7b]
          vpextrw  $123, %zmm3, 254(%ecx)

// CHECK: vpextrw  $123, %zmm3, -256(%edx)
// CHECK: encoding: [0x62,0xf3,0x7d,0x48,0x15,0x5a,0x80,0x7b]
          vpextrw  $123, %zmm3, -256(%edx)

// CHECK: vpinsrb $123, %ecx, %zmm3, %zmm2
// CHECK: encoding: [0x62,0xf3,0x65,0x48,0x20,0xd1,0x7b]
          vpinsrb $123, %ecx, %zmm3, %zmm2

// CHECK: vpinsrb $123, %ecx, %ymm3, %ymm2
// CHECK: encoding: [0x62,0xf3,0x65,0x28,0x20,0xd1,0x7b]
          vpinsrb $123, %ecx, %ymm3, %ymm2

// CHECK: vpinsrb  $123, 268435456(%esp,%esi,8), %zmm3, %zmm2
// CHECK: encoding: [0x62,0xf3,0x65,0x48,0x20,0x94,0xf4,0x00,0x00,0x00,0x10,0x7b]
          vpinsrb  $123, 268435456(%esp,%esi,8), %zmm3, %zmm2

// CHECK: vpinsrb  $123, 291(%edi,%eax,4), %zmm3, %zmm2
// CHECK: encoding: [0x62,0xf3,0x65,0x48,0x20,0x94,0x87,0x23,0x01,0x00,0x00,0x7b]
          vpinsrb  $123, 291(%edi,%eax,4), %zmm3, %zmm2

// CHECK: vpinsrb  $123, (%eax), %zmm3, %zmm2
// CHECK: encoding: [0x62,0xf3,0x65,0x48,0x20,0x10,0x7b]
          vpinsrb  $123, (%eax), %zmm3, %zmm2

// CHECK: vpinsrb  $123, -32(,%ebp,2), %zmm3, %zmm2
// CHECK: encoding: [0x62,0xf3,0x65,0x48,0x20,0x14,0x6d,0xe0,0xff,0xff,0xff,0x7b]
          vpinsrb  $123, -32(,%ebp,2), %zmm3, %zmm2

// CHECK: vpinsrb  $123, 127(%ecx), %zmm3, %zmm2
// CHECK: encoding: [0x62,0xf3,0x65,0x48,0x20,0x51,0x7f,0x7b]
          vpinsrb  $123, 127(%ecx), %zmm3, %zmm2

// CHECK: vpinsrb  $123, -128(%edx), %zmm3, %zmm2
// CHECK: encoding: [0x62,0xf3,0x65,0x48,0x20,0x52,0x80,0x7b]
          vpinsrb  $123, -128(%edx), %zmm3, %zmm2

// CHECK: vpinsrb  $123, 268435456(%esp,%esi,8), %ymm3, %ymm2
// CHECK: encoding: [0x62,0xf3,0x65,0x28,0x20,0x94,0xf4,0x00,0x00,0x00,0x10,0x7b]
          vpinsrb  $123, 268435456(%esp,%esi,8), %ymm3, %ymm2

// CHECK: vpinsrb  $123, 291(%edi,%eax,4), %ymm3, %ymm2
// CHECK: encoding: [0x62,0xf3,0x65,0x28,0x20,0x94,0x87,0x23,0x01,0x00,0x00,0x7b]
          vpinsrb  $123, 291(%edi,%eax,4), %ymm3, %ymm2

// CHECK: vpinsrb  $123, (%eax), %ymm3, %ymm2
// CHECK: encoding: [0x62,0xf3,0x65,0x28,0x20,0x10,0x7b]
          vpinsrb  $123, (%eax), %ymm3, %ymm2

// CHECK: vpinsrb  $123, -32(,%ebp,2), %ymm3, %ymm2
// CHECK: encoding: [0x62,0xf3,0x65,0x28,0x20,0x14,0x6d,0xe0,0xff,0xff,0xff,0x7b]
          vpinsrb  $123, -32(,%ebp,2), %ymm3, %ymm2

// CHECK: vpinsrb  $123, 127(%ecx), %ymm3, %ymm2
// CHECK: encoding: [0x62,0xf3,0x65,0x28,0x20,0x51,0x7f,0x7b]
          vpinsrb  $123, 127(%ecx), %ymm3, %ymm2

// CHECK: vpinsrb  $123, -128(%edx), %ymm3, %ymm2
// CHECK: encoding: [0x62,0xf3,0x65,0x28,0x20,0x52,0x80,0x7b]
          vpinsrb  $123, -128(%edx), %ymm3, %ymm2

// CHECK: vpinsrd $123, %ecx, %zmm3, %zmm2
// CHECK: encoding: [0x62,0xf3,0x65,0x48,0x22,0xd1,0x7b]
          vpinsrd $123, %ecx, %zmm3, %zmm2

// CHECK: vpinsrd $123, %ecx, %ymm3, %ymm2
// CHECK: encoding: [0x62,0xf3,0x65,0x28,0x22,0xd1,0x7b]
          vpinsrd $123, %ecx, %ymm3, %ymm2

// CHECK: vpinsrd  $123, 268435456(%esp,%esi,8), %ymm3, %ymm2
// CHECK: encoding: [0x62,0xf3,0x65,0x28,0x22,0x94,0xf4,0x00,0x00,0x00,0x10,0x7b]
          vpinsrd  $123, 268435456(%esp,%esi,8), %ymm3, %ymm2

// CHECK: vpinsrd  $123, 291(%edi,%eax,4), %ymm3, %ymm2
// CHECK: encoding: [0x62,0xf3,0x65,0x28,0x22,0x94,0x87,0x23,0x01,0x00,0x00,0x7b]
          vpinsrd  $123, 291(%edi,%eax,4), %ymm3, %ymm2

// CHECK: vpinsrd  $123, (%eax), %ymm3, %ymm2
// CHECK: encoding: [0x62,0xf3,0x65,0x28,0x22,0x10,0x7b]
          vpinsrd  $123, (%eax), %ymm3, %ymm2

// CHECK: vpinsrd  $123, -128(,%ebp,2), %ymm3, %ymm2
// CHECK: encoding: [0x62,0xf3,0x65,0x28,0x22,0x14,0x6d,0x80,0xff,0xff,0xff,0x7b]
          vpinsrd  $123, -128(,%ebp,2), %ymm3, %ymm2

// CHECK: vpinsrd  $123, 508(%ecx), %ymm3, %ymm2
// CHECK: encoding: [0x62,0xf3,0x65,0x28,0x22,0x51,0x7f,0x7b]
          vpinsrd  $123, 508(%ecx), %ymm3, %ymm2

// CHECK: vpinsrd  $123, -512(%edx), %ymm3, %ymm2
// CHECK: encoding: [0x62,0xf3,0x65,0x28,0x22,0x52,0x80,0x7b]
          vpinsrd  $123, -512(%edx), %ymm3, %ymm2

// CHECK: vpinsrd  $123, 268435456(%esp,%esi,8), %zmm3, %zmm2
// CHECK: encoding: [0x62,0xf3,0x65,0x48,0x22,0x94,0xf4,0x00,0x00,0x00,0x10,0x7b]
          vpinsrd  $123, 268435456(%esp,%esi,8), %zmm3, %zmm2

// CHECK: vpinsrd  $123, 291(%edi,%eax,4), %zmm3, %zmm2
// CHECK: encoding: [0x62,0xf3,0x65,0x48,0x22,0x94,0x87,0x23,0x01,0x00,0x00,0x7b]
          vpinsrd  $123, 291(%edi,%eax,4), %zmm3, %zmm2

// CHECK: vpinsrd  $123, (%eax), %zmm3, %zmm2
// CHECK: encoding: [0x62,0xf3,0x65,0x48,0x22,0x10,0x7b]
          vpinsrd  $123, (%eax), %zmm3, %zmm2

// CHECK: vpinsrd  $123, -128(,%ebp,2), %zmm3, %zmm2
// CHECK: encoding: [0x62,0xf3,0x65,0x48,0x22,0x14,0x6d,0x80,0xff,0xff,0xff,0x7b]
          vpinsrd  $123, -128(,%ebp,2), %zmm3, %zmm2

// CHECK: vpinsrd  $123, 508(%ecx), %zmm3, %zmm2
// CHECK: encoding: [0x62,0xf3,0x65,0x48,0x22,0x51,0x7f,0x7b]
          vpinsrd  $123, 508(%ecx), %zmm3, %zmm2

// CHECK: vpinsrd  $123, -512(%edx), %zmm3, %zmm2
// CHECK: encoding: [0x62,0xf3,0x65,0x48,0x22,0x52,0x80,0x7b]
          vpinsrd  $123, -512(%edx), %zmm3, %zmm2

// CHECK: vpinsrw $123, %ecx, %zmm3, %zmm2
// CHECK: encoding: [0x62,0xf1,0x65,0x48,0xc4,0xd1,0x7b]
          vpinsrw $123, %ecx, %zmm3, %zmm2

// CHECK: vpinsrw $123, %ecx, %ymm3, %ymm2
// CHECK: encoding: [0x62,0xf1,0x65,0x28,0xc4,0xd1,0x7b]
          vpinsrw $123, %ecx, %ymm3, %ymm2

// CHECK: vpinsrw  $123, 268435456(%esp,%esi,8), %ymm3, %ymm2
// CHECK: encoding: [0x62,0xf1,0x65,0x28,0xc4,0x94,0xf4,0x00,0x00,0x00,0x10,0x7b]
          vpinsrw  $123, 268435456(%esp,%esi,8), %ymm3, %ymm2

// CHECK: vpinsrw  $123, 291(%edi,%eax,4), %ymm3, %ymm2
// CHECK: encoding: [0x62,0xf1,0x65,0x28,0xc4,0x94,0x87,0x23,0x01,0x00,0x00,0x7b]
          vpinsrw  $123, 291(%edi,%eax,4), %ymm3, %ymm2

// CHECK: vpinsrw  $123, (%eax), %ymm3, %ymm2
// CHECK: encoding: [0x62,0xf1,0x65,0x28,0xc4,0x10,0x7b]
          vpinsrw  $123, (%eax), %ymm3, %ymm2

// CHECK: vpinsrw  $123, -64(,%ebp,2), %ymm3, %ymm2
// CHECK: encoding: [0x62,0xf1,0x65,0x28,0xc4,0x14,0x6d,0xc0,0xff,0xff,0xff,0x7b]
          vpinsrw  $123, -64(,%ebp,2), %ymm3, %ymm2

// CHECK: vpinsrw  $123, 254(%ecx), %ymm3, %ymm2
// CHECK: encoding: [0x62,0xf1,0x65,0x28,0xc4,0x51,0x7f,0x7b]
          vpinsrw  $123, 254(%ecx), %ymm3, %ymm2

// CHECK: vpinsrw  $123, -256(%edx), %ymm3, %ymm2
// CHECK: encoding: [0x62,0xf1,0x65,0x28,0xc4,0x52,0x80,0x7b]
          vpinsrw  $123, -256(%edx), %ymm3, %ymm2

// CHECK: vpinsrw  $123, 268435456(%esp,%esi,8), %zmm3, %zmm2
// CHECK: encoding: [0x62,0xf1,0x65,0x48,0xc4,0x94,0xf4,0x00,0x00,0x00,0x10,0x7b]
          vpinsrw  $123, 268435456(%esp,%esi,8), %zmm3, %zmm2

// CHECK: vpinsrw  $123, 291(%edi,%eax,4), %zmm3, %zmm2
// CHECK: encoding: [0x62,0xf1,0x65,0x48,0xc4,0x94,0x87,0x23,0x01,0x00,0x00,0x7b]
          vpinsrw  $123, 291(%edi,%eax,4), %zmm3, %zmm2

// CHECK: vpinsrw  $123, (%eax), %zmm3, %zmm2
// CHECK: encoding: [0x62,0xf1,0x65,0x48,0xc4,0x10,0x7b]
          vpinsrw  $123, (%eax), %zmm3, %zmm2

// CHECK: vpinsrw  $123, -64(,%ebp,2), %zmm3, %zmm2
// CHECK: encoding: [0x62,0xf1,0x65,0x48,0xc4,0x14,0x6d,0xc0,0xff,0xff,0xff,0x7b]
          vpinsrw  $123, -64(,%ebp,2), %zmm3, %zmm2

// CHECK: vpinsrw  $123, 254(%ecx), %zmm3, %zmm2
// CHECK: encoding: [0x62,0xf1,0x65,0x48,0xc4,0x51,0x7f,0x7b]
          vpinsrw  $123, 254(%ecx), %zmm3, %zmm2

// CHECK: vpinsrw  $123, -256(%edx), %zmm3, %zmm2
// CHECK: encoding: [0x62,0xf1,0x65,0x48,0xc4,0x52,0x80,0x7b]
          vpinsrw  $123, -256(%edx), %zmm3, %zmm2

