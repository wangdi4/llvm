// REQUIRES: intel_feature_isa_vpinsr_vpextr
// RUN: llvm-mc -triple i386 -x86-asm-syntax=intel -output-asm-variant=1 --show-encoding %s | FileCheck %s

// CHECK: vpextrb ecx, zmm3, 123
// CHECK: encoding: [0x62,0xf3,0x7d,0x48,0x14,0xd9,0x7b]
          vpextrb ecx, zmm3, 123

// CHECK: vpextrb ecx, ymm3, 123
// CHECK: encoding: [0x62,0xf3,0x7d,0x28,0x14,0xd9,0x7b]
          vpextrb ecx, ymm3, 123

// CHECK: vpextrb byte ptr [esp + 8*esi + 268435456], zmm3, 123
// CHECK: encoding: [0x62,0xf3,0x7d,0x48,0x14,0x9c,0xf4,0x00,0x00,0x00,0x10,0x7b]
          vpextrb byte ptr [esp + 8*esi + 268435456], zmm3, 123

// CHECK: vpextrb byte ptr [edi + 4*eax + 291], zmm3, 123
// CHECK: encoding: [0x62,0xf3,0x7d,0x48,0x14,0x9c,0x87,0x23,0x01,0x00,0x00,0x7b]
          vpextrb byte ptr [edi + 4*eax + 291], zmm3, 123

// CHECK: vpextrb byte ptr [eax], zmm3, 123
// CHECK: encoding: [0x62,0xf3,0x7d,0x48,0x14,0x18,0x7b]
          vpextrb byte ptr [eax], zmm3, 123

// CHECK: vpextrb byte ptr [2*ebp - 32], zmm3, 123
// CHECK: encoding: [0x62,0xf3,0x7d,0x48,0x14,0x1c,0x6d,0xe0,0xff,0xff,0xff,0x7b]
          vpextrb byte ptr [2*ebp - 32], zmm3, 123

// CHECK: vpextrb byte ptr [ecx + 127], zmm3, 123
// CHECK: encoding: [0x62,0xf3,0x7d,0x48,0x14,0x59,0x7f,0x7b]
          vpextrb byte ptr [ecx + 127], zmm3, 123

// CHECK: vpextrb byte ptr [edx - 128], zmm3, 123
// CHECK: encoding: [0x62,0xf3,0x7d,0x48,0x14,0x5a,0x80,0x7b]
          vpextrb byte ptr [edx - 128], zmm3, 123

// CHECK: vpextrb byte ptr [esp + 8*esi + 268435456], ymm3, 123
// CHECK: encoding: [0x62,0xf3,0x7d,0x28,0x14,0x9c,0xf4,0x00,0x00,0x00,0x10,0x7b]
          vpextrb byte ptr [esp + 8*esi + 268435456], ymm3, 123

// CHECK: vpextrb byte ptr [edi + 4*eax + 291], ymm3, 123
// CHECK: encoding: [0x62,0xf3,0x7d,0x28,0x14,0x9c,0x87,0x23,0x01,0x00,0x00,0x7b]
          vpextrb byte ptr [edi + 4*eax + 291], ymm3, 123

// CHECK: vpextrb byte ptr [eax], ymm3, 123
// CHECK: encoding: [0x62,0xf3,0x7d,0x28,0x14,0x18,0x7b]
          vpextrb byte ptr [eax], ymm3, 123

// CHECK: vpextrb byte ptr [2*ebp - 32], ymm3, 123
// CHECK: encoding: [0x62,0xf3,0x7d,0x28,0x14,0x1c,0x6d,0xe0,0xff,0xff,0xff,0x7b]
          vpextrb byte ptr [2*ebp - 32], ymm3, 123

// CHECK: vpextrb byte ptr [ecx + 127], ymm3, 123
// CHECK: encoding: [0x62,0xf3,0x7d,0x28,0x14,0x59,0x7f,0x7b]
          vpextrb byte ptr [ecx + 127], ymm3, 123

// CHECK: vpextrb byte ptr [edx - 128], ymm3, 123
// CHECK: encoding: [0x62,0xf3,0x7d,0x28,0x14,0x5a,0x80,0x7b]
          vpextrb byte ptr [edx - 128], ymm3, 123

// CHECK: vpextrd ecx, ymm3, 123
// CHECK: encoding: [0x62,0xf3,0x7d,0x28,0x16,0xd9,0x7b]
          vpextrd ecx, ymm3, 123

// CHECK: vpextrd ecx, zmm3, 123
// CHECK: encoding: [0x62,0xf3,0x7d,0x48,0x16,0xd9,0x7b]
          vpextrd ecx, zmm3, 123

// CHECK: vpextrd dword ptr [esp + 8*esi + 268435456], ymm3, 123
// CHECK: encoding: [0x62,0xf3,0x7d,0x28,0x16,0x9c,0xf4,0x00,0x00,0x00,0x10,0x7b]
          vpextrd dword ptr [esp + 8*esi + 268435456], ymm3, 123

// CHECK: vpextrd dword ptr [edi + 4*eax + 291], ymm3, 123
// CHECK: encoding: [0x62,0xf3,0x7d,0x28,0x16,0x9c,0x87,0x23,0x01,0x00,0x00,0x7b]
          vpextrd dword ptr [edi + 4*eax + 291], ymm3, 123

// CHECK: vpextrd dword ptr [eax], ymm3, 123
// CHECK: encoding: [0x62,0xf3,0x7d,0x28,0x16,0x18,0x7b]
          vpextrd dword ptr [eax], ymm3, 123

// CHECK: vpextrd dword ptr [2*ebp - 128], ymm3, 123
// CHECK: encoding: [0x62,0xf3,0x7d,0x28,0x16,0x1c,0x6d,0x80,0xff,0xff,0xff,0x7b]
          vpextrd dword ptr [2*ebp - 128], ymm3, 123

// CHECK: vpextrd dword ptr [ecx + 508], ymm3, 123
// CHECK: encoding: [0x62,0xf3,0x7d,0x28,0x16,0x59,0x7f,0x7b]
          vpextrd dword ptr [ecx + 508], ymm3, 123

// CHECK: vpextrd dword ptr [edx - 512], ymm3, 123
// CHECK: encoding: [0x62,0xf3,0x7d,0x28,0x16,0x5a,0x80,0x7b]
          vpextrd dword ptr [edx - 512], ymm3, 123

// CHECK: vpextrd dword ptr [esp + 8*esi + 268435456], zmm3, 123
// CHECK: encoding: [0x62,0xf3,0x7d,0x48,0x16,0x9c,0xf4,0x00,0x00,0x00,0x10,0x7b]
          vpextrd dword ptr [esp + 8*esi + 268435456], zmm3, 123

// CHECK: vpextrd dword ptr [edi + 4*eax + 291], zmm3, 123
// CHECK: encoding: [0x62,0xf3,0x7d,0x48,0x16,0x9c,0x87,0x23,0x01,0x00,0x00,0x7b]
          vpextrd dword ptr [edi + 4*eax + 291], zmm3, 123

// CHECK: vpextrd dword ptr [eax], zmm3, 123
// CHECK: encoding: [0x62,0xf3,0x7d,0x48,0x16,0x18,0x7b]
          vpextrd dword ptr [eax], zmm3, 123

// CHECK: vpextrd dword ptr [2*ebp - 128], zmm3, 123
// CHECK: encoding: [0x62,0xf3,0x7d,0x48,0x16,0x1c,0x6d,0x80,0xff,0xff,0xff,0x7b]
          vpextrd dword ptr [2*ebp - 128], zmm3, 123

// CHECK: vpextrd dword ptr [ecx + 508], zmm3, 123
// CHECK: encoding: [0x62,0xf3,0x7d,0x48,0x16,0x59,0x7f,0x7b]
          vpextrd dword ptr [ecx + 508], zmm3, 123

// CHECK: vpextrd dword ptr [edx - 512], zmm3, 123
// CHECK: encoding: [0x62,0xf3,0x7d,0x48,0x16,0x5a,0x80,0x7b]
          vpextrd dword ptr [edx - 512], zmm3, 123

// CHECK: vpextrw ecx, zmm3, 123
// CHECK: encoding: [0x62,0xf1,0x7d,0x48,0xc5,0xcb,0x7b]
          vpextrw ecx, zmm3, 123

// CHECK: vpextrw ecx, ymm3, 123
// CHECK: encoding: [0x62,0xf1,0x7d,0x28,0xc5,0xcb,0x7b]
          vpextrw ecx, ymm3, 123

// CHECK: vpextrw word ptr [esp + 8*esi + 268435456], ymm3, 123
// CHECK: encoding: [0x62,0xf3,0x7d,0x28,0x15,0x9c,0xf4,0x00,0x00,0x00,0x10,0x7b]
          vpextrw word ptr [esp + 8*esi + 268435456], ymm3, 123

// CHECK: vpextrw word ptr [edi + 4*eax + 291], ymm3, 123
// CHECK: encoding: [0x62,0xf3,0x7d,0x28,0x15,0x9c,0x87,0x23,0x01,0x00,0x00,0x7b]
          vpextrw word ptr [edi + 4*eax + 291], ymm3, 123

// CHECK: vpextrw word ptr [eax], ymm3, 123
// CHECK: encoding: [0x62,0xf3,0x7d,0x28,0x15,0x18,0x7b]
          vpextrw word ptr [eax], ymm3, 123

// CHECK: vpextrw word ptr [2*ebp - 64], ymm3, 123
// CHECK: encoding: [0x62,0xf3,0x7d,0x28,0x15,0x1c,0x6d,0xc0,0xff,0xff,0xff,0x7b]
          vpextrw word ptr [2*ebp - 64], ymm3, 123

// CHECK: vpextrw word ptr [ecx + 254], ymm3, 123
// CHECK: encoding: [0x62,0xf3,0x7d,0x28,0x15,0x59,0x7f,0x7b]
          vpextrw word ptr [ecx + 254], ymm3, 123

// CHECK: vpextrw word ptr [edx - 256], ymm3, 123
// CHECK: encoding: [0x62,0xf3,0x7d,0x28,0x15,0x5a,0x80,0x7b]
          vpextrw word ptr [edx - 256], ymm3, 123

// CHECK: vpextrw word ptr [esp + 8*esi + 268435456], zmm3, 123
// CHECK: encoding: [0x62,0xf3,0x7d,0x48,0x15,0x9c,0xf4,0x00,0x00,0x00,0x10,0x7b]
          vpextrw word ptr [esp + 8*esi + 268435456], zmm3, 123

// CHECK: vpextrw word ptr [edi + 4*eax + 291], zmm3, 123
// CHECK: encoding: [0x62,0xf3,0x7d,0x48,0x15,0x9c,0x87,0x23,0x01,0x00,0x00,0x7b]
          vpextrw word ptr [edi + 4*eax + 291], zmm3, 123

// CHECK: vpextrw word ptr [eax], zmm3, 123
// CHECK: encoding: [0x62,0xf3,0x7d,0x48,0x15,0x18,0x7b]
          vpextrw word ptr [eax], zmm3, 123

// CHECK: vpextrw word ptr [2*ebp - 64], zmm3, 123
// CHECK: encoding: [0x62,0xf3,0x7d,0x48,0x15,0x1c,0x6d,0xc0,0xff,0xff,0xff,0x7b]
          vpextrw word ptr [2*ebp - 64], zmm3, 123

// CHECK: vpextrw word ptr [ecx + 254], zmm3, 123
// CHECK: encoding: [0x62,0xf3,0x7d,0x48,0x15,0x59,0x7f,0x7b]
          vpextrw word ptr [ecx + 254], zmm3, 123

// CHECK: vpextrw word ptr [edx - 256], zmm3, 123
// CHECK: encoding: [0x62,0xf3,0x7d,0x48,0x15,0x5a,0x80,0x7b]
          vpextrw word ptr [edx - 256], zmm3, 123

// CHECK: vpinsrb zmm2, zmm3, ecx, 123
// CHECK: encoding: [0x62,0xf3,0x65,0x48,0x20,0xd1,0x7b]
          vpinsrb zmm2, zmm3, ecx, 123

// CHECK: vpinsrb ymm2, ymm3, ecx, 123
// CHECK: encoding: [0x62,0xf3,0x65,0x28,0x20,0xd1,0x7b]
          vpinsrb ymm2, ymm3, ecx, 123

// CHECK: vpinsrb zmm2, zmm3, byte ptr [esp + 8*esi + 268435456], 123
// CHECK: encoding: [0x62,0xf3,0x65,0x48,0x20,0x94,0xf4,0x00,0x00,0x00,0x10,0x7b]
          vpinsrb zmm2, zmm3, byte ptr [esp + 8*esi + 268435456], 123

// CHECK: vpinsrb zmm2, zmm3, byte ptr [edi + 4*eax + 291], 123
// CHECK: encoding: [0x62,0xf3,0x65,0x48,0x20,0x94,0x87,0x23,0x01,0x00,0x00,0x7b]
          vpinsrb zmm2, zmm3, byte ptr [edi + 4*eax + 291], 123

// CHECK: vpinsrb zmm2, zmm3, byte ptr [eax], 123
// CHECK: encoding: [0x62,0xf3,0x65,0x48,0x20,0x10,0x7b]
          vpinsrb zmm2, zmm3, byte ptr [eax], 123

// CHECK: vpinsrb zmm2, zmm3, byte ptr [2*ebp - 32], 123
// CHECK: encoding: [0x62,0xf3,0x65,0x48,0x20,0x14,0x6d,0xe0,0xff,0xff,0xff,0x7b]
          vpinsrb zmm2, zmm3, byte ptr [2*ebp - 32], 123

// CHECK: vpinsrb zmm2, zmm3, byte ptr [ecx + 127], 123
// CHECK: encoding: [0x62,0xf3,0x65,0x48,0x20,0x51,0x7f,0x7b]
          vpinsrb zmm2, zmm3, byte ptr [ecx + 127], 123

// CHECK: vpinsrb zmm2, zmm3, byte ptr [edx - 128], 123
// CHECK: encoding: [0x62,0xf3,0x65,0x48,0x20,0x52,0x80,0x7b]
          vpinsrb zmm2, zmm3, byte ptr [edx - 128], 123

// CHECK: vpinsrb ymm2, ymm3, byte ptr [esp + 8*esi + 268435456], 123
// CHECK: encoding: [0x62,0xf3,0x65,0x28,0x20,0x94,0xf4,0x00,0x00,0x00,0x10,0x7b]
          vpinsrb ymm2, ymm3, byte ptr [esp + 8*esi + 268435456], 123

// CHECK: vpinsrb ymm2, ymm3, byte ptr [edi + 4*eax + 291], 123
// CHECK: encoding: [0x62,0xf3,0x65,0x28,0x20,0x94,0x87,0x23,0x01,0x00,0x00,0x7b]
          vpinsrb ymm2, ymm3, byte ptr [edi + 4*eax + 291], 123

// CHECK: vpinsrb ymm2, ymm3, byte ptr [eax], 123
// CHECK: encoding: [0x62,0xf3,0x65,0x28,0x20,0x10,0x7b]
          vpinsrb ymm2, ymm3, byte ptr [eax], 123

// CHECK: vpinsrb ymm2, ymm3, byte ptr [2*ebp - 32], 123
// CHECK: encoding: [0x62,0xf3,0x65,0x28,0x20,0x14,0x6d,0xe0,0xff,0xff,0xff,0x7b]
          vpinsrb ymm2, ymm3, byte ptr [2*ebp - 32], 123

// CHECK: vpinsrb ymm2, ymm3, byte ptr [ecx + 127], 123
// CHECK: encoding: [0x62,0xf3,0x65,0x28,0x20,0x51,0x7f,0x7b]
          vpinsrb ymm2, ymm3, byte ptr [ecx + 127], 123

// CHECK: vpinsrb ymm2, ymm3, byte ptr [edx - 128], 123
// CHECK: encoding: [0x62,0xf3,0x65,0x28,0x20,0x52,0x80,0x7b]
          vpinsrb ymm2, ymm3, byte ptr [edx - 128], 123

// CHECK: vpinsrd zmm2, zmm3, ecx, 123
// CHECK: encoding: [0x62,0xf3,0x65,0x48,0x22,0xd1,0x7b]
          vpinsrd zmm2, zmm3, ecx, 123

// CHECK: vpinsrd ymm2, ymm3, ecx, 123
// CHECK: encoding: [0x62,0xf3,0x65,0x28,0x22,0xd1,0x7b]
          vpinsrd ymm2, ymm3, ecx, 123

// CHECK: vpinsrd ymm2, ymm3, dword ptr [esp + 8*esi + 268435456], 123
// CHECK: encoding: [0x62,0xf3,0x65,0x28,0x22,0x94,0xf4,0x00,0x00,0x00,0x10,0x7b]
          vpinsrd ymm2, ymm3, dword ptr [esp + 8*esi + 268435456], 123

// CHECK: vpinsrd ymm2, ymm3, dword ptr [edi + 4*eax + 291], 123
// CHECK: encoding: [0x62,0xf3,0x65,0x28,0x22,0x94,0x87,0x23,0x01,0x00,0x00,0x7b]
          vpinsrd ymm2, ymm3, dword ptr [edi + 4*eax + 291], 123

// CHECK: vpinsrd ymm2, ymm3, dword ptr [eax], 123
// CHECK: encoding: [0x62,0xf3,0x65,0x28,0x22,0x10,0x7b]
          vpinsrd ymm2, ymm3, dword ptr [eax], 123

// CHECK: vpinsrd ymm2, ymm3, dword ptr [2*ebp - 128], 123
// CHECK: encoding: [0x62,0xf3,0x65,0x28,0x22,0x14,0x6d,0x80,0xff,0xff,0xff,0x7b]
          vpinsrd ymm2, ymm3, dword ptr [2*ebp - 128], 123

// CHECK: vpinsrd ymm2, ymm3, dword ptr [ecx + 508], 123
// CHECK: encoding: [0x62,0xf3,0x65,0x28,0x22,0x51,0x7f,0x7b]
          vpinsrd ymm2, ymm3, dword ptr [ecx + 508], 123

// CHECK: vpinsrd ymm2, ymm3, dword ptr [edx - 512], 123
// CHECK: encoding: [0x62,0xf3,0x65,0x28,0x22,0x52,0x80,0x7b]
          vpinsrd ymm2, ymm3, dword ptr [edx - 512], 123

// CHECK: vpinsrd zmm2, zmm3, dword ptr [esp + 8*esi + 268435456], 123
// CHECK: encoding: [0x62,0xf3,0x65,0x48,0x22,0x94,0xf4,0x00,0x00,0x00,0x10,0x7b]
          vpinsrd zmm2, zmm3, dword ptr [esp + 8*esi + 268435456], 123

// CHECK: vpinsrd zmm2, zmm3, dword ptr [edi + 4*eax + 291], 123
// CHECK: encoding: [0x62,0xf3,0x65,0x48,0x22,0x94,0x87,0x23,0x01,0x00,0x00,0x7b]
          vpinsrd zmm2, zmm3, dword ptr [edi + 4*eax + 291], 123

// CHECK: vpinsrd zmm2, zmm3, dword ptr [eax], 123
// CHECK: encoding: [0x62,0xf3,0x65,0x48,0x22,0x10,0x7b]
          vpinsrd zmm2, zmm3, dword ptr [eax], 123

// CHECK: vpinsrd zmm2, zmm3, dword ptr [2*ebp - 128], 123
// CHECK: encoding: [0x62,0xf3,0x65,0x48,0x22,0x14,0x6d,0x80,0xff,0xff,0xff,0x7b]
          vpinsrd zmm2, zmm3, dword ptr [2*ebp - 128], 123

// CHECK: vpinsrd zmm2, zmm3, dword ptr [ecx + 508], 123
// CHECK: encoding: [0x62,0xf3,0x65,0x48,0x22,0x51,0x7f,0x7b]
          vpinsrd zmm2, zmm3, dword ptr [ecx + 508], 123

// CHECK: vpinsrd zmm2, zmm3, dword ptr [edx - 512], 123
// CHECK: encoding: [0x62,0xf3,0x65,0x48,0x22,0x52,0x80,0x7b]
          vpinsrd zmm2, zmm3, dword ptr [edx - 512], 123

// CHECK: vpinsrw zmm2, zmm3, ecx, 123
// CHECK: encoding: [0x62,0xf1,0x65,0x48,0xc4,0xd1,0x7b]
          vpinsrw zmm2, zmm3, ecx, 123

// CHECK: vpinsrw ymm2, ymm3, ecx, 123
// CHECK: encoding: [0x62,0xf1,0x65,0x28,0xc4,0xd1,0x7b]
          vpinsrw ymm2, ymm3, ecx, 123

// CHECK: vpinsrw ymm2, ymm3, word ptr [esp + 8*esi + 268435456], 123
// CHECK: encoding: [0x62,0xf1,0x65,0x28,0xc4,0x94,0xf4,0x00,0x00,0x00,0x10,0x7b]
          vpinsrw ymm2, ymm3, word ptr [esp + 8*esi + 268435456], 123

// CHECK: vpinsrw ymm2, ymm3, word ptr [edi + 4*eax + 291], 123
// CHECK: encoding: [0x62,0xf1,0x65,0x28,0xc4,0x94,0x87,0x23,0x01,0x00,0x00,0x7b]
          vpinsrw ymm2, ymm3, word ptr [edi + 4*eax + 291], 123

// CHECK: vpinsrw ymm2, ymm3, word ptr [eax], 123
// CHECK: encoding: [0x62,0xf1,0x65,0x28,0xc4,0x10,0x7b]
          vpinsrw ymm2, ymm3, word ptr [eax], 123

// CHECK: vpinsrw ymm2, ymm3, word ptr [2*ebp - 64], 123
// CHECK: encoding: [0x62,0xf1,0x65,0x28,0xc4,0x14,0x6d,0xc0,0xff,0xff,0xff,0x7b]
          vpinsrw ymm2, ymm3, word ptr [2*ebp - 64], 123

// CHECK: vpinsrw ymm2, ymm3, word ptr [ecx + 254], 123
// CHECK: encoding: [0x62,0xf1,0x65,0x28,0xc4,0x51,0x7f,0x7b]
          vpinsrw ymm2, ymm3, word ptr [ecx + 254], 123

// CHECK: vpinsrw ymm2, ymm3, word ptr [edx - 256], 123
// CHECK: encoding: [0x62,0xf1,0x65,0x28,0xc4,0x52,0x80,0x7b]
          vpinsrw ymm2, ymm3, word ptr [edx - 256], 123

// CHECK: vpinsrw zmm2, zmm3, word ptr [esp + 8*esi + 268435456], 123
// CHECK: encoding: [0x62,0xf1,0x65,0x48,0xc4,0x94,0xf4,0x00,0x00,0x00,0x10,0x7b]
          vpinsrw zmm2, zmm3, word ptr [esp + 8*esi + 268435456], 123

// CHECK: vpinsrw zmm2, zmm3, word ptr [edi + 4*eax + 291], 123
// CHECK: encoding: [0x62,0xf1,0x65,0x48,0xc4,0x94,0x87,0x23,0x01,0x00,0x00,0x7b]
          vpinsrw zmm2, zmm3, word ptr [edi + 4*eax + 291], 123

// CHECK: vpinsrw zmm2, zmm3, word ptr [eax], 123
// CHECK: encoding: [0x62,0xf1,0x65,0x48,0xc4,0x10,0x7b]
          vpinsrw zmm2, zmm3, word ptr [eax], 123

// CHECK: vpinsrw zmm2, zmm3, word ptr [2*ebp - 64], 123
// CHECK: encoding: [0x62,0xf1,0x65,0x48,0xc4,0x14,0x6d,0xc0,0xff,0xff,0xff,0x7b]
          vpinsrw zmm2, zmm3, word ptr [2*ebp - 64], 123

// CHECK: vpinsrw zmm2, zmm3, word ptr [ecx + 254], 123
// CHECK: encoding: [0x62,0xf1,0x65,0x48,0xc4,0x51,0x7f,0x7b]
          vpinsrw zmm2, zmm3, word ptr [ecx + 254], 123

// CHECK: vpinsrw zmm2, zmm3, word ptr [edx - 256], 123
// CHECK: encoding: [0x62,0xf1,0x65,0x48,0xc4,0x52,0x80,0x7b]
          vpinsrw zmm2, zmm3, word ptr [edx - 256], 123

