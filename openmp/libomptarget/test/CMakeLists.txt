if(INTEL_CUSTOMIZATION)
  # Disable libomptarget tests, as long as they do not have access
  # to lib[i]omp (e.g. omp.h) and it is not clear how to satisfy
  # this dependency: lib[i]omp is copied from our pre-built tools location,
  # and it is not guaranteed that it is copied before LIT testing starts.
  libomptarget_say("Cannot test with Intel specific OpenMP runtime.")
  libomptarget_warning_say("The check-libomptarget target will not be available!")
  return()
endif(INTEL_CUSTOMIZATION)

# CMakeLists.txt file for unit testing OpenMP offloading runtime library.
if(NOT OPENMP_TEST_COMPILER_ID STREQUAL "Clang" OR
   OPENMP_TEST_COMPILER_VERSION VERSION_LESS 6.0.0)
  libomptarget_say("Can only test with Clang compiler in version 6.0.0 or later.")
  libomptarget_warning_say("The check-libomptarget target will not be available!")
  return()
endif()

if(LIBOMPTARGET_ENABLE_DEBUG)
  set(LIBOMPTARGET_DEBUG True)
else()
  set(LIBOMPTARGET_DEBUG False)
endif()

# INTEL_CUSTOMIZATION
# Do not add omp as a dependency since Intel specific OpenMP runtime is being
# used.
  add_openmp_testsuite(check-libomptarget "Running libomptarget tests" ${CMAKE_CURRENT_BINARY_DIR} DEPENDS omptarget)
# end INTEL_CUSTOMIZATION

# Configure the lit.site.cfg.in file
set(AUTO_GEN_COMMENT "## Autogenerated by libomptarget configuration.\n# Do not edit!")
configure_file(lit.site.cfg.in lit.site.cfg @ONLY)
