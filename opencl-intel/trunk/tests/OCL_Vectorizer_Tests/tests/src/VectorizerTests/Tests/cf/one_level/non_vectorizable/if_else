/*
 * Part of the control flow tests that check vectorization of control flow statements.
 * Tests the LLVM br caused by if-else statement when its condition depends on uchar and does
 * depend on thread id.
 *
 * @param in
 * 		The input array.
 * @param out
 * 		The output array.
 *
 */
__kernel void
if_else (	__global const float *in,
		__global float *out)
{
	int gid = get_global_id(0);


	uchar tmp1 = (in[0] + FLOAT1) * in[1] - in[2];
	uchar tmp2 = in[min(gid, gid * 2 / 3)];
	tmp2 = convert_uchar(ilogb(convert_float(tmp2))) * tmp1;
	tmp2 = tmp2 - convert_uchar(cospi((float)tmp1)) + 1324;
	tmp2 = tmp2 + (tmp1 - tmp2 / 4);

	out[gid] = acos(in[gid]);

	if (tmp1 | tmp2) {
		out[gid] = tmp2 | tmp1;
		out[gid] = out[gid] + tmp1;

	} else {

		out[gid] = tmp2;
		out[gid] = tmp2 + tmp1;
		out[gid] = out[gid] / 5.1231;

	}

	out[gid] = dot(gid, (out[gid] - 17) * 2);
}
