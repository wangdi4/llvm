/*
 * Part of the control flow tests that check vectorization of control flow statements.
 *
 * Tests the LLVM br caused by if statement when its condition depends on double and doesn't
 * depend on thread id.
 *
 * @param in
 * 		The input array.
 * @param out
 * 		The output array.
 *
 */
__kernel void
if_test (	__global const float *in,
		__global float *out)
{
	int gid = get_global_id(0);

	int id = min(in[0], 3.0f);
	double tmp1 = in[id];
	tmp1 = tmp1 * in[3] + DOUBLE1;

	out[gid] = tmp1;

	double tmp2 = tmp1 / 14;
	tmp2 = tmp2 * in[0] + 6;


	if(tmp1 <= tmp2) {
		out[gid] = distance((double)out[gid],tmp2 * in[gid]);
	}
}
