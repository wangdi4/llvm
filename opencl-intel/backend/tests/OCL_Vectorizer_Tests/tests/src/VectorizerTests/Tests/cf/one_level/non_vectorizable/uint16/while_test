/*
 * Part of the control flow tests that check vectorization of control flow statements.
 * Tests the LLVM br caused by while statement when its condition depends on uint and does
 * depend on thread id.
 *
 * @param in
 * 		The input array.
 * @param out
 * 		The output array.
 *
 */
__kernel void
while_test (	__global const uint16 *in,
		__global float *out,  const uint16 uint16Arg1)
{
	int gid = get_global_id(0);

	uint16 tmp1 = min(in[gid] * ((uint16)10), uint16Arg1);

	out[gid] = 0;

	tmp1 = sub_sat(uint16Arg1, tmp1);

	while ((tmp1.s1 > 5) || (tmp1.sB < tmp1.s7)) {

		out[gid] += max(tmp1.s4, tmp1.sF);

		tmp1 /= ((uint16)10);
		// tmp1.s1 is uint and therfore >=0
		tmp1.sB += tmp1.s1 * 100;
	}

}
