// Tests select instruction via WIA.
// The 'select' instruction requires an 'i1' value or a vector of 'i1' values indicating the condition, and two values of the same first class type.
// If the val1/val2 are vectors and the condition is a scalar, then entire vectors are selected, not individual elements
// vector un condition, conseq variavles
//

__kernel void wia_10_f_select(__global int4 *in,__global int4 *out,const ptrdiff_t intPtrArg1)
{
	
	int gid = get_global_id(0);
	int4 i=(int4) (in[gid]),j=in[0],k=gid*3+1,m=0; //j cons k stride
	
	for (m.s0=0;m.s0<20;m.s0++,m.s1+=2)
	{
		i=i*2;
		j=j+2;
		i+=j;
		j-=1;
		if(i.s0+j.s1+m.s1 >100) 
		{
			i=i*2;
			j=j+4;
		}
		k=k+2;
		k+=i-j;
	}
	//i,j,k is uni.
	
	for (m.s0=1;m.s0<19;m.s0++,m++)
	{
		out[gid]-=select(j, k, i);;		//i un, j con , k str
		if (m.s0+m.s1+m.s2>20) 
		{
			out[gid] = select(j, k, i);
			out[gid]+=2;
		}	
	}
	
	
	



}