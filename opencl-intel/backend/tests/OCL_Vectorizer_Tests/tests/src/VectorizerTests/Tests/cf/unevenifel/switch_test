/*
 * Part of the control flow tests that check vectorization of control flow statements.
 *
 * Tests the LLVM switch instruction when its condition depends on long and doesn't
 * depend on thread id, when only some of the cases contain "return".
 *
 * @param in
 * 		The input array.
 * @param out
 * 		The output array.
 *
 */
__kernel void
switch_test (	__global const float *in,
		__global float *out)
{
	int gid = get_global_id(0);

	long  tmp1 = in[gid];

	switch((tmp1 / 7) % 5) {

	case 0:
		tmp1 += fdim(tmp1, in[gid]);
		out[gid] = tmp1;
		return;

	case 1:
		out[gid] = -1;
		break;

	case 2:
		out[gid] = 1;
		// fall through

	case 3:
		out[gid] = 2 + out[gid];
		return;

	case 4:
		out[gid] = 3;
		// fall through


	default:
		tmp1 = -7 * tmp1;
		out[gid] -= tmp1;
		break;

	}


	out[gid] = tmp1 - out[gid];
}
