__kernel void
atomic_func06
( __global  int *in,
		__global float *out)
{
	int gid = get_global_id(0);
	int i;
	float sum1=0;
	float sum2=0;
	int rez1,rez2,rez3,rez4,rez5,rez6;
	int j;
	
	//printf("\n gid=%d in[gid]=%d in[gid+33]=%d\n",gid,in[gid],in[gid+33]);
	
	
	for (i=1;i<10000;i++)
	{
		rez1=atomic_add(&in[gid],gid)+atomic_add(&in[gid+33],gid);
		sum1=sum1+rez1;
		for (j=0;j<1024;j++)
		{
			rez2=atomic_add(&in[gid],1)+atomic_add(&in[gid+33],2);
			rez3=atomic_sub(&in[gid],gid)+atomic_sub(&in[gid+33],gid);	
			if (rez2+rez3>rez1)
			{	
				rez4=atomic_sub(&in[gid],1)+atomic_sub(&in[gid+33],3);
				rez5=atomic_xchg(&in[gid],gid)+atomic_xchg(&in[gid+33],gid);
			}
			else
			{
				rez5=atomic_add(&in[gid],gid)+atomic_xchg(&in[gid+33],gid);
				rez4=atomic_xchg(&in[gid],1)+atomic_sub(&in[gid+33],3);
				rez6=atomic_xchg(&in[gid],23)+atomic_xchg(&in[gid+33],2);
			}			
			sum2=sum2+rez2+rez3+rez4-rez5-rez6;	 		
		}	
	}	
	out[gid] =	rez1+rez2+rez3-rez4-rez5-rez6+sum1+sum2;
}	