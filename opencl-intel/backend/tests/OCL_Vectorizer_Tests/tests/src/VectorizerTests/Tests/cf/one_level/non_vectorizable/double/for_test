/*
 * Part of the control flow tests that check vectorization of control flow statements.
 * Tests the LLVM br caused by for statement when its condition depends on double and does
 * depend on thread id.
 *
 * @param in
 * 		The input array.
 * @param out
 * 		The output array.
 *
 */
__kernel void
for_test (	__global const float *in,
		__global float *out,  const double doubleArg1)
{
	int gid = get_global_id(0);
	double tmp1 = doubleArg1 + DOUBLE1;
	tmp1 = ldexp(tmp1, log10(tmp1 / 132));
	tmp1 = radians(tmp1 - doubleArg1 * in[gid]);

	double tmp2 = doubleArg1;

	for(double i = 0; i < tmp1; i = (i + 2) * 3.4891134) {
		tmp2 += in[gid] * i;
	}

	out[gid] = convert_float(tmp2);
}
