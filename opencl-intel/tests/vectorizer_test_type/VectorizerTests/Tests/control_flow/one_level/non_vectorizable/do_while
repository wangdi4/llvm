/*
 * Part of the control flow tests that check vectorization of control flow statements.
 * Tests the LLVM br caused by do-while statement when its condition depends on short and does
 * depend on thread id.
 *
 * @param in
 *     The input array.
 * @param out
 *     The output array.
 *
 */
__kernel void
do_while (  __global const float *in,
    __global float *out)
{
  int gid = get_global_id(0);

  float tmp = -500 * in[gid] + 10;

  int i = 0;
  do {

    tmp = tmp * -8 + in[gid];
    i++;

  } while ((in[gid] > tmp) & (i < 100));

  out[gid] = tmp;

}
