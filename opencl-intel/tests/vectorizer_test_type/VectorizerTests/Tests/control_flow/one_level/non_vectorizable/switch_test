/*
 * Part of the control flow tests that check vectorization of control flow statements.
 *
 * Tests the LLVM switch instruction when its condition depends on ulong and does
 * depend on thread id.
 *
 * @param in
 * 		The input array.
 * @param out
 * 		The output array.
 *
 */
__kernel void
switch_test (	__global const float *in,
		__global float *out)
{
	int gid = get_global_id(0);
	long  tmp = gid * in[gid];

	tmp = max(tmp, LONG1);
	tmp = tmp * FLOAT2;

	out[gid] = in[gid];

	switch(tmp) {

	case 0:
		out[gid] = 0;
		break;

	case 1:
		out[gid] = 1;
		// fall through

	case 2:
		out[gid] = out[gid] * 2;
		// fall through

	default:
		out[gid] = normalize(out[gid] * 5);
		break;

	}
}
