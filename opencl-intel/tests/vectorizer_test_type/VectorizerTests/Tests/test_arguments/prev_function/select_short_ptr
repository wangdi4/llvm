/*
 * Part of the tests that check different LLVM instructions on different argument
 * types and different argument sources.
 *
 * Tests the OpenCL select instruction when it recieves short* arguments
 * produced by previous instructions.
 * This function is NOT vectorizable.
 *
 * @param in
 * 		The input array.
 * @param out
 * 		The output array.
 *
 */

__kernel void
select_short_ptr
( __global const short *in,
		__global short *out)
{
	int gid = get_global_id(0);
	short* tmp1 = (short*)in;
	short* tmp2 = tmp1 + gid;
	short* tmp3 = tmp1 - 23;
	short* tmp4 = tmp3 + (gid / 2);
	short* tmp5 = tmp4 > tmp2 ? tmp2 : tmp4;
	short* tmp6 = tmp5 < tmp1 ? tmp1 : tmp5;
	out[gid] = *tmp6;
}
