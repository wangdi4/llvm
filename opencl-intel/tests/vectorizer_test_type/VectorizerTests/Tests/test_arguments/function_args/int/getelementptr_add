/*
 * Part of the tests that check different LLVM instructions on different argument
 * types and different argument sources.
 *
 * Tests the LLVM getelementptr instruction when it recieves short16* int function argument
 * as input that was created by add.
 * This instruction is vectorizable.
 *
 * @param in
 *     The input array.
 * @param out
 *     The output array.
 *
 */
__kernel void
getelementptr_add (  __global const short16 *in,
    __global float8 *out, __global const int intArg1)
{
  int gid = get_global_id(0);
  short16* tmp1 = (short16*) in;
  short16* tmp2 = tmp1 + gid;
  short16* tmp3 = tmp1 + intArg1;
  // select added to make sure not going over the array range
  short16* tmp4 = tmp3 < tmp1 ? tmp1 : tmp3;
  short16* tmp5 = tmp4 > tmp2 ? tmp2 : tmp4;
  out[gid] = (float8)(*tmp5);
}
