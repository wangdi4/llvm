// INTEL_FEATURE_CPU_DMR
// REQUIRES: intel_feature_cpu_dmr

// RUN: %clang -march=diamondrapids -m32 -E -dM %s -o - 2>&1 \
// RUN:     -target i386-unknown-linux \
// RUN:   | FileCheck -match-full-lines %s -check-prefix=CHECK_DMR_M32
// CHECK_DMR_M32: #define __AES__ 1
// CHECK_DMR_M32: #define __AMXAVX512__ 1
// CHECK_DMR_M32: #define __AMXMOVRS__ 1
// CHECK_DMR_M32: #define __AMXSPARSE__ 1
// CHECK_DMR_M32: #define __AMXTF32__ 1
// CHECK_DMR_M32: #define __AMXTILE2__ 1
// CHECK_DMR_M32: #define __AMXTRANSPOSE__ 1
// CHECK_DMR_M32: #define __AMX_BF16__ 1
// CHECK_DMR_M32: #define __AMX_COMPLEX__ 1
// CHECK_DMR_M32: #define __AMX_FP16__ 1
// CHECK_DMR_M32: #define __AMX_INT8__ 1
// CHECK_DMR_M32: #define __AMX_TILE__ 1
// CHECK_DMR_M32: #define __AVX256P__ 1
// CHECK_DMR_M32: #define __AVX2__ 1
// CHECK_DMR_M32: #define __AVX512BF16NE__ 1
// CHECK_DMR_M32: #define __AVX512BF16__ 1
// CHECK_DMR_M32: #define __AVX512BITALG__ 1
// CHECK_DMR_M32: #define __AVX512BW__ 1
// CHECK_DMR_M32: #define __AVX512CD__ 1
// CHECK_DMR_M32: #define __AVX512CONVERT__ 1
// CHECK_DMR_M32: #define __AVX512DQ__ 1
// CHECK_DMR_M32: #define __AVX512FP16__ 1
// CHECK_DMR_M32: #define __AVX512F__ 1
// CHECK_DMR_M32: #define __AVX512IFMA__ 1
// CHECK_DMR_M32: #define __AVX512MEDIAX__ 1
// CHECK_DMR_M32: #define __AVX512MOVRS__ 1
// CHECK_DMR_M32: #define __AVX512RAOFP__ 1
// CHECK_DMR_M32: #define __AVX512SATCVT__ 1
// CHECK_DMR_M32: #define __AVX512VBMI2__ 1
// CHECK_DMR_M32: #define __AVX512VBMI__ 1
// CHECK_DMR_M32: #define __AVX512VL__ 1
// CHECK_DMR_M32: #define __AVX512VNNIFP16__ 1
// CHECK_DMR_M32: #define __AVX512VNNIINT16__ 1
// CHECK_DMR_M32: #define __AVX512VNNIINT8__ 1
// CHECK_DMR_M32: #define __AVX512VNNI__ 1
// CHECK_DMR_M32: #define __AVX512VPOPCNTDQ__ 1
// CHECK_DMR_M32: #define __AVXCONVERT__ 1
// CHECK_DMR_M32: #define __AVXIFMA__ 1
// CHECK_DMR_M32: #define __AVXRAOFP__ 1
// CHECK_DMR_M32: #define __AVXVNNIINT16__ 1
// CHECK_DMR_M32: #define __AVXVNNIINT8__ 1
// CHECK_DMR_M32: #define __AVXVNNI__ 1
// CHECK_DMR_M32: #define __AVX__ 1
// CHECK_DMR_M32: #define __BMI2__ 1
// CHECK_DMR_M32: #define __BMI__ 1
// CHECK_DMR_M32: #define __CLDEMOTE__ 1
// CHECK_DMR_M32: #define __CLFLUSHOPT__ 1
// CHECK_DMR_M32: #define __CLWB__ 1
// CHECK_DMR_M32: #define __CMPCCXADD__ 1
// CHECK_DMR_M32: #define __ENQCMD__ 1
// CHECK_DMR_M32: #define __F16C__ 1
// CHECK_DMR_M32: #define __FMA__ 1
// CHECK_DMR_M32: #define __GFNI__ 1
// CHECK_DMR_M32: #define __INVPCID__ 1
// CHECK_DMR_M32: #define __LZCNT__ 1
// CHECK_DMR_M32: #define __MMX__ 1
// CHECK_DMR_M32: #define __MOVBE__ 1
// CHECK_DMR_M32: #define __PCLMUL__ 1
// CHECK_DMR_M32: #define __PCONFIG__ 1
// CHECK_DMR_M32: #define __PKU__ 1
// CHECK_DMR_M32: #define __POPCNT__ 1
// CHECK_DMR_M32: #define __PREFETCHI__ 1
// CHECK_DMR_M32: #define __PREFETCHST2__ 1
// CHECK_DMR_M32: #define __PRFCHW__ 1
// CHECK_DMR_M32: #define __PTWRITE__ 1
// CHECK_DMR_M32: #define __RAOINT__ 1
// CHECK_DMR_M32: #define __RDPID__ 1
// CHECK_DMR_M32: #define __RDRND__ 1
// CHECK_DMR_M32: #define __RDSEED__ 1
// CHECK_DMR_M32: #define __SERIALIZE__ 1
// CHECK_DMR_M32: #define __SGX__ 1
// CHECK_DMR_M32: #define __SHA512__ 1
// CHECK_DMR_M32: #define __SHA__ 1
// CHECK_DMR_M32: #define __SHSTK__ 1
// CHECK_DMR_M32: #define __SM3__ 1
// CHECK_DMR_M32: #define __SM4__ 1
// CHECK_DMR_M32: #define __SSE2__ 1
// CHECK_DMR_M32: #define __SSE3__ 1
// CHECK_DMR_M32: #define __SSE4_1__ 1
// CHECK_DMR_M32: #define __SSE4_2__ 1
// CHECK_DMR_M32: #define __SSE__ 1
// CHECK_DMR_M32: #define __SSSE3__ 1
// CHECK_DMR_M32: #define __TSXLDTRK__ 1
// CHECK_DMR_M32: #define __UINTR__ 1
// CHECK_DMR_M32: #define __VAES__ 1
// CHECK_DMR_M32: #define __VPCLMULQDQ__ 1
// CHECK_DMR_M32: #define __VPINSRVPEXTR__ 1
// CHECK_DMR_M32: #define __WAITPKG__ 1
// CHECK_DMR_M32: #define __WBNOINVD__ 1
// CHECK_DMR_M32: #define __XSAVEC__ 1
// CHECK_DMR_M32: #define __XSAVEOPT__ 1
// CHECK_DMR_M32: #define __XSAVES__ 1
// CHECK_DMR_M32: #define __XSAVE__ 1
// CHECK_DMR_M32: #define __corei7 1
// CHECK_DMR_M32: #define __corei7__ 1
// CHECK_DMR_M32: #define __i386 1
// CHECK_DMR_M32: #define __i386__ 1
// CHECK_DMR_M32: #define __tune_corei7__ 1
// CHECK_DMR_M32: #define i386 1

// RUN: %clang -march=diamondrapids -m64 -E -dM %s -o - 2>&1 \
// RUN:     -target i386-unknown-linux \
// RUN:   | FileCheck -match-full-lines %s -check-prefix=CHECK_DMR_M64
// CHECK_DMR_M64: #define __AES__ 1
// CHECK_DMR_M64: #define __AMXAVX512__ 1
// CHECK_DMR_M64: #define __AMXMOVRS__ 1
// CHECK_DMR_M64: #define __AMXSPARSE__ 1
// CHECK_DMR_M64: #define __AMXTF32__ 1
// CHECK_DMR_M64: #define __AMXTILE2__ 1
// CHECK_DMR_M64: #define __AMXTRANSPOSE__ 1
// CHECK_DMR_M64: #define __AMX_BF16__ 1
// CHECK_DMR_M64: #define __AMX_COMPLEX__ 1
// CHECK_DMR_M64: #define __AMX_FP16__ 1
// CHECK_DMR_M64: #define __AMX_INT8__ 1
// CHECK_DMR_M64: #define __AMX_TILE__ 1
// CHECK_DMR_M64: #define __AVX256P__ 1
// CHECK_DMR_M64: #define __AVX2__ 1
// CHECK_DMR_M64: #define __AVX512BF16NE__ 1
// CHECK_DMR_M64: #define __AVX512BF16__ 1
// CHECK_DMR_M64: #define __AVX512BITALG__ 1
// CHECK_DMR_M64: #define __AVX512BW__ 1
// CHECK_DMR_M64: #define __AVX512CD__ 1
// CHECK_DMR_M64: #define __AVX512CONVERT__ 1
// CHECK_DMR_M64: #define __AVX512DQ__ 1
// CHECK_DMR_M64: #define __AVX512FP16__ 1
// CHECK_DMR_M64: #define __AVX512F__ 1
// CHECK_DMR_M64: #define __AVX512IFMA__ 1
// CHECK_DMR_M64: #define __AVX512MEDIAX__ 1
// CHECK_DMR_M64: #define __AVX512MOVRS__ 1
// CHECK_DMR_M64: #define __AVX512RAOFP__ 1
// CHECK_DMR_M64: #define __AVX512SATCVT__ 1
// CHECK_DMR_M64: #define __AVX512VBMI2__ 1
// CHECK_DMR_M64: #define __AVX512VBMI__ 1
// CHECK_DMR_M64: #define __AVX512VL__ 1
// CHECK_DMR_M64: #define __AVX512VNNIFP16__ 1
// CHECK_DMR_M64: #define __AVX512VNNIINT16__ 1
// CHECK_DMR_M64: #define __AVX512VNNIINT8__ 1
// CHECK_DMR_M64: #define __AVX512VNNI__ 1
// CHECK_DMR_M64: #define __AVX512VPOPCNTDQ__ 1
// CHECK_DMR_M64: #define __AVXCONVERT__ 1
// CHECK_DMR_M64: #define __AVXIFMA__ 1
// CHECK_DMR_M64: #define __AVXRAOFP__ 1
// CHECK_DMR_M64: #define __AVXVNNIINT16__ 1
// CHECK_DMR_M64: #define __AVXVNNIINT8__ 1
// CHECK_DMR_M64: #define __AVXVNNI__ 1
// CHECK_DMR_M64: #define __AVX__ 1
// CHECK_DMR_M64: #define __BMI2__ 1
// CHECK_DMR_M64: #define __BMI__ 1
// CHECK_DMR_M64: #define __CLDEMOTE__ 1
// CHECK_DMR_M64: #define __CLFLUSHOPT__ 1
// CHECK_DMR_M64: #define __CLWB__ 1
// CHECK_DMR_M64: #define __CMPCCXADD__ 1
// CHECK_DMR_M64: #define __ENQCMD__ 1
// CHECK_DMR_M64: #define __F16C__ 1
// CHECK_DMR_M64: #define __FMA__ 1
// CHECK_DMR_M64: #define __GFNI__ 1
// CHECK_DMR_M64: #define __INVPCID__ 1
// CHECK_DMR_M64: #define __LZCNT__ 1
// CHECK_DMR_M64: #define __MMX__ 1
// CHECK_DMR_M64: #define __MOVBE__ 1
// CHECK_DMR_M64: #define __PCLMUL__ 1
// CHECK_DMR_M64: #define __PCONFIG__ 1
// CHECK_DMR_M64: #define __PKU__ 1
// CHECK_DMR_M64: #define __POPCNT__ 1
// CHECK_DMR_M64: #define __PREFETCHI__ 1
// CHECK_DMR_M64: #define __PREFETCHST2__ 1
// CHECK_DMR_M64: #define __PRFCHW__ 1
// CHECK_DMR_M64: #define __PTWRITE__ 1
// CHECK_DMR_M64: #define __RAOINT__ 1
// CHECK_DMR_M64: #define __RDPID__ 1
// CHECK_DMR_M64: #define __RDRND__ 1
// CHECK_DMR_M64: #define __RDSEED__ 1
// CHECK_DMR_M64: #define __SERIALIZE__ 1
// CHECK_DMR_M64: #define __SGX__ 1
// CHECK_DMR_M64: #define __SHA512__ 1
// CHECK_DMR_M64: #define __SHA__ 1
// CHECK_DMR_M64: #define __SHSTK__ 1
// CHECK_DMR_M64: #define __SM3__ 1
// CHECK_DMR_M64: #define __SM4__ 1
// CHECK_DMR_M64: #define __SSE2__ 1
// CHECK_DMR_M64: #define __SSE3__ 1
// CHECK_DMR_M64: #define __SSE4_1__ 1
// CHECK_DMR_M64: #define __SSE4_2__ 1
// CHECK_DMR_M64: #define __SSE__ 1
// CHECK_DMR_M64: #define __SSSE3__ 1
// CHECK_DMR_M64: #define __TSXLDTRK__ 1
// CHECK_DMR_M64: #define __UINTR__ 1
// CHECK_DMR_M64: #define __VAES__ 1
// CHECK_DMR_M64: #define __VPCLMULQDQ__ 1
// CHECK_DMR_M64: #define __VPINSRVPEXTR__ 1
// CHECK_DMR_M64: #define __WAITPKG__ 1
// CHECK_DMR_M64: #define __WBNOINVD__ 1
// CHECK_DMR_M64: #define __XSAVEC__ 1
// CHECK_DMR_M64: #define __XSAVEOPT__ 1
// CHECK_DMR_M64: #define __XSAVES__ 1
// CHECK_DMR_M64: #define __XSAVE__ 1
// CHECK_DMR_M64: #define __amd64 1
// CHECK_DMR_M64: #define __amd64__ 1
// CHECK_DMR_M64: #define __corei7 1
// CHECK_DMR_M64: #define __corei7__ 1
// CHECK_DMR_M64: #define __tune_corei7__ 1
// CHECK_DMR_M64: #define __x86_64 1
// CHECK_DMR_M64: #define __x86_64__ 1

// end INTEL_FEATURE_CPU_DMR
